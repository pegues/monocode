!function($){var base,editors=[],myLayout,files=[],timer;$.sceditor=function(el,op){function launchFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function beautify(e){var t=base.getEditorInstance(base.tab.getActiveId()).instance,a=require("ace/token_iterator").TokenIterator,s=0,i=0,n=-1;if(e){var o=t.selection.getRange();s=o.start.row,i=o.start.column,n=o.end.row}for(var r,l,c,d=new a(t.getSession(),s,i),p=d.getCurrentToken(),f="",u=[{type:"support.php_tag",value:"<?php"},{type:"support.php_tag",value:"<?"},{type:"support.php_tag",value:"?>"},{type:"paren.lparen",value:"{",indent:!0},{type:"paren.rparen",value:"}",indent:!1},{type:"text",value:";"},{type:"meta.tag.punctuation.tag-close.xml",value:">"},{type:"meta.tag.punctuation.tag-open.xml",value:"<",blockTag:!0,indent:!0,dontBreak:!0},{type:"meta.tag.punctuation.end-tag-open.xml",value:"</",blockTag:!0,indent:!1,dontBreak:!0},{type:"punctuation.operator",value:";",after:!0}],b=[{type:"entity.other.attribute-name",prepend:!0},{type:"storage.type",value:"var",append:!0},{type:"keyword.operator",value:"="},{type:"keyword",value:"as",prepend:!0,append:!0}],g=["html","head","script","style","body","table","tr","td","div","ul","li","form","br"],h=0,m=!1,v={},_={};p&&(-1==n||d.getCurrentTokenRow()<=n);)if(_=d.stepForward(),_&&"meta.tag.tag-name"==_.type.substr(0,17)&&(c=_.value),"support.php_tag"==v.type&&"<?="==v.value&&(m=!0),"meta.tag.tag-name"==p.type&&(p.value=p.value.toLowerCase()),"text"==p.type&&(p.value=p.value.trim()),p.value){for(var y in b)p.type!=b[y].type||b[y].value&&p.value!=b[y].value||(b[y].prepend&&(p.value=" "+p.value),b[y].append&&(p.value+=" "));if("meta.tag.tag-name"==p.type.substr(0,17)&&(r=p.value),!m){for(y in u)if(p.type==u[y].type&&p.value==u[y].value&&(!u[y].blockTag||-1!==g.indexOf(c))){u[y].indent===!1&&h--;break}for(y in u)if(v.type==u[y].type&&v.value==u[y].value&&(!u[y].blockTag||-1!==g.indexOf(r))){if(u[y].indent===!0&&h++,!u[y].dontBreak)for(f+="\n",y=0;h>y;y++)f+="	";break}}if(f+=p.value,"support.php_tag"==p.type&&"?>"==p.value&&(m=!1),l=r,v=p,p=_,!p)break}else p=_;if(-1==n)t.setValue(f);else{var w=t.selection.getRange();t.session.remove(w),t.session.insert(w.start,f)}t.focus()}base=this,base.$el=$(el),base.el=el,base.thisEl=null,base.$el.data("sceditor",base),base.init=function(){function toggleLiveResizing(){$.each($.layout.config.borderPanes,function(e,t){var a=myLayout.options[t];a.livePaneResizing=!a.livePaneResizing})}base.options=$.extend({},$.sceditor.defaultOptions,op),$.ajaxSetup({timeout:9e5});var stateResetSettings={west__size:250,west__initClosed:!1,west__initHidden:!1};myLayout=$("div.wrapper").layout({closable:!0,resizable:!0,slidable:!0,livePaneResizing:!1,togglerLength_open:0,togglerLength_closed:"100%",togglerAlign_open:"center",togglerAlign_closed:"center",spacing_open:1,spacing_closed:1,north__size:20,north__minSize:31,north__spacing_open:0,north__togglerLength_open:0,north__togglerLength_closed:-1,north__resizable:!1,north__slidable:!1,south__size:170,south__minSize:56,south__onresize:function(){base.prepareStage()},south__onhide:function(){base.prepareStage()},south__onshow:function(){base.prepareStage()},south__onopen:function(){base.prepareStage()},south__onclose:function(){base.prepareStage()},south__onopen_end:function(){base.prepareStage()},south__onopen_start:function(){base.prepareStage()},south__onclose_end:function(){base.prepareStage()},south__onclose_start:function(){base.prepareStage()},south__maxSize:500,south__spacing_open:1,south__spacing_closed:0,south__resizeable:!0,south__slidable:!0,south__initClosed:!0,south__showOverflowOnHover:!0,south__fxSpeed_size:"fast",south__fxSpeed_open:0,east__size:35,east__spacing_open:1,east__togglerLength_open:0,east__togglerLength_closed:-1,east__resizable:!1,east__slidable:!1,east__fxName:"none",west__showOverflowOnHover:!0,west__animatePaneSizing:!1,west__fxSpeed_size:"fast",west__fxSpeed_open:0,west__minSize:170,west__maxSize:600,west__spacing_open:1,west__spacing_closed:8,maskPanesEarly:!0,center__maskIframesOnResize:"iframe",center__contentIgnoreSelector:".ui-layout-mask",south__maskIframesOnResize:"iframe",south__contentIgnoreSelector:".ui-layout-mask",stateManagement__enabled:!0,showDebugMessages:!0}),$("input#openner").change(function(e){base.fileHasBeenOpened()}),$("body").on("click","[data-event-target-id]",function(){$(".optionstoolitem").removeClass("active"),$(this).find(".optionstoolitem").addClass("active"),$('[data-layout-type="left_manager"]').removeClass("active"),$('[data-manager-id="'+$(this).data("event-target-id")+'"]').addClass("active");var e=$(this).data("event-target-id");"files_manager_container"==e?(base.file.reload(),base.file.reloadProjects()):"workspace_manager_container"==e?base.loadWorkshop():"ftps_manager_container"==e?base.ftp.reloadList():"database_manager_container"==e&&base.loadDatabases()}),$("#tempMemory").click(function(){base.resetConfiguration({key:$(this).attr("data-key"),value:$(this).attr("data-value")})}),$(window).resize(function(){base.prepareStage()}),$("body").on("click",".tabsButton",function(){if("undefined"!=typeof $(this).data("fram-id")&&""!=$(this).data("fram-id")){var _controls=$(this).data("action");if("undefined"!=typeof _controls)if("close"==_controls||"cancle"==_controls){try{eval("document.getElementById('"+$(this).data("fram-id")+"').contentWindow."+_controls+"()")}catch(e){}base.tab.close(base.tab.getActiveId())}else try{eval("document.getElementById('"+$(this).data("fram-id")+"').contentWindow."+_controls+"()")}catch(e){alert("Function not found to execute.")}}}),$("body").on("click",".ftpsavedgrid .ftprowitem",function(){}),$("ul.ftpconnectionslist").on("click","li.ftpitem div.name",function(){$(this).parent().parent().hasClass("active")?$(this).parent().parent().removeClass("active"):$(this).parent().parent().addClass("active")}),$("body").on("click","[data-action],[data-file-url]",function(e){if(e.stopPropagation(),e.preventDefault(),base.thisEl=$(this),!$(this).parent().hasClass("disable")&&!$(this).hasClass("disabled")){$(this).next().hasClass("sitenavdropdown")||$(this).parents("ul.sitenavdropdown.primary").hide();var type=$(this).data("action-type");if("command"==type)base.command.execute($(this).data("action"));else if("calljs"==type)eval("base."+$(this).data("action")+"()");else if("popup"==$(this).data("action-type")){var url=$(this).data("file-url");url||(url=$(this).data("action")),base.openPopup({url:url,title:$(this).data("title")})}else if("opentab"==$(this).data("action-type")){var u="undefined"!=typeof $(this).data("action")&&""!=$(this).data("action")?$(this).data("action"):$(this).data("file-url");base.tab.openSystem({url:u,title:$(this).data("title")})}return!1}}),base.loadWorkshop(),base.tab.init(),base.initActivity(),base.command.init(op.commands),base.disableMenus($(this)),base.sessionValidator.start(),base.layout.init(op.layout_options),base.widget.init(op.widgets,op.widget_options)},base.layout=function(){return $(".footerpane .footerpanesectionclose").click(function(){base.layout.closePane($(this).closest(".footerpane"))}),$(".ftrfeaturestablist>li").click(function(){base.layout.togglePane($(this).data("pane-name"))}),{init:function(e){if(this.__options=e?e:{},e&&!jQuery.isEmptyObject(e))for(var t in e)1==e[t].open&&this.openPane(t);else this.resizePanel()},getPane:function(e){return $("div.footerpane[data-pane-name='"+e+"']")},closePane:function(e){e.hide(),this.resizePanel(e.parent());var t=e.data("pane-name");$(".ftrfeaturestablist > li."+t).removeClass("active"),this.saveOption(t,"open",0)},openPane:function(e){var t=this.getPane(e);t.length&&(t.show(),myLayout.open("south"),$(".ftrfeaturestablist>li."+e).addClass("active"),this.resizePanel(t.parent()),this.saveOption(e,"open",1),"terminal"==e&&$(".terminalwrapper iframe").length<=0&&$("<iframe>",{src:base.options.baseUrl+"editor/terminal?domain="+base.workspace.getActive().ws_domain}).appendTo(".terminalwrapper"))},togglePane:function(e){var t=this.getPane(e);t.is(":visible")?this.closePane(t):this.openPane(e)},resizePanel:function(e){"undefined"!=typeof e&&e||(e=$(".footeroutputwrapper_inside"));var t=$(".footerpane:visible",e).length;0>=t?myLayout.close("south"):(e.removeClass("onepane twopanes"),1==t?e.addClass("onepane"):2==t&&e.addClass("twopanes"))},__options:null,saveOption:function(e,t,a){"undefined"==typeof this.__options[e]&&(this.__options[e]={}),this.__options[e][t]=a,base.request({url:base.options.baseUrl+"editor/saveLayoutOption",data:{name:e,options:this.__options[e]}})}}}(),base.tab=function(){return{init:function(){$("div.editortabbar").tabs({activate:function(e,t){var a=t.newTab.data("tab-data");if(!a.isNew){if(!a.isActive){if(base.tab.getInstance().widget().find(".ui-tabs-nav>li").each(function(){var e=$(this).data("tab-data");e.isActive=!1,$(this).data("tab-data",e)}),a.isActive=!0,t.newTab.data("tab-data",a),base.tab.isProcessingMultipleTabs())return;base.tab.saveOpenState(a)}t.newTab.hasClass("loaded")||t.newTab.hasClass("loading")||base.tab.load(a,function(){base.disableMenus(),base.prepareStage();var e=base.getEditorInstance(a.id);e&&e.instance.focus()})}base.disableMenus(),base.prepareStage();var s=base.getEditorInstance(a.id);s&&s.instance.focus()}}).find(".ui-tabs-nav").sortable({axis:"x",delay:150,distance:2,stop:function(){base.tab.refreshWidget(),base.tab.saveAllOpenState()}}).find("li").remove(),$("div.editortabbar").on("click",".close",function(e){e.preventDefault(),e.stopPropagation(),base.file.close($(this).closest("li").attr("data-tab-id"))}).on("mouseup","a.ui-tabs-anchor",function(e){e&&2==e.which&&(e.preventDefault(),e.stopPropagation(),base.file.close($(this).closest("li").attr("data-tab-id")))}),$(".tabcontrolarrow.arrowleft").mousedown(base.tab.startMovingToLeft).mouseleave(base.tab.stopMoving),$(".tabcontrolarrow.arrowright").mousedown(base.tab.startMovingToRight).mouseleave(base.tab.stopMoving),$("body").mouseup(base.tab.stopMoving),$(".tabdropdownfileslist").on("click","li",function(){$("#panel_nav_"+$(this).data("tab-id")).find("a.ui-tabs-anchor").click()});var e={alias:"filetabcontextmenu",width:230,items:[{text:"Close",alias:"close",action:base.tab.contextmenu.onClick},{text:"Close All But This Tab",alias:"closeOthers",action:base.tab.contextmenu.onClick},{text:"Close to the Left",alias:"closeLeft",action:base.tab.contextmenu.onClick},{text:"Close to the Right",alias:"closeRight",action:base.tab.contextmenu.onClick},{text:"Close All",alias:"closeAll",action:base.tab.contextmenu.onClick}],onShow:base.tab.contextmenu.onShow,onContextMenu:base.tab.contextmenu.onContextMenu};$("#editorfilelist").contextmenu(e)},contextmenu:{tab:null,onContextMenu:function(e){var t=$(e.target).closest("li",this);return base.tab.contextmenu.tab=t.length?t:null,!0},onShow:function(e){var t=null==base.tab.contextmenu.tab;e.disable("close",t),e.disable("closeOthers",t),e.disable("closeLeft",t),e.disable("closeRight",t)},onClick:function(){switch(this.data.alias){case"close":base.tab.contextmenu.tab.find(".close").click();break;case"closeOthers":base.file.closeOther(base.tab.contextmenu.tab);break;case"closeLeft":base.file.closeLeft(base.tab.contextmenu.tab);break;case"closeRight":base.file.closeRight(base.tab.contextmenu.tab);break;case"closeAll":base.file.closeAll()}}},getInstance:function(){return $("div.editortabbar").tabs("instance")},refreshWidget:function(){this.getInstance().refresh()},Types:{WELCOME:"welcome",SYSTEM:"system",EDITOR:"editor",IMAGE:"image",STATIC:"static"},RemoteTypes:{FTP:"ftp",SFTP:"ftp"},timer:null,interval:500,startMovingToLeft:function(){var e=$("ul#editorfilelist"),t=e.position().left;if(0>t){var a=50;t>-50&&(a=-t),e.css("left",t+a+"px"),clearTimeout(base.tab.timer),base.tab.timer=setTimeout(base.tab.startMovingToLeft,base.tab.interval),500==base.tab.interval&&(base.tab.interval=100)}},startMovingToRight:function(){var e=$("ul#editorfilelist"),t=e.position().left,a=e.parent().width(),s=0;$("ul#editorfilelist > li").each(function(){s+=$(this).width()});var i=s+t-a;if(i>0){var n=50;50>i&&(n=i),e.css("left",e.position().left-n+"px"),clearTimeout(base.tab.timer),base.tab.timer=setTimeout(base.tab.startMovingToRight,base.tab.interval),500==base.tab.interval&&(base.tab.interval=100)}},stopMoving:function(){clearTimeout(base.tab.timer),base.tab.interval=500},getCount:function(){return $(base.options.configAce.tabListUl+">li").length},activate:function(e){var t=$("a[href='#panel_"+e+"']");t.closest("li").hasClass("ui-state-active")||t.click()},getActive:function(){return $(base.options.configAce.tabListUl+">li.ui-state-active")},getActiveId:function(){return this.getActive().data("tab-id")},getActiveData:function(){var e=this.getActive();return e.length>0?e.data("tab-data"):null},getActiveTitle:function(){var e=this.getActiveData();return e?e.title:null},get:function(e){return $(base.options.configAce.tabListUl+">li[data-tab-id='"+e+"']")},getData:function(e){return this.get(e).data("tab-data")},isNewFile:function(e){return this.getData(e).isNew},isRemote:function(e){return this.getData(e).isRemote},isEditor:function(e){return this.getData(e).type==this.Types.EDITOR},getByURL:function(e){return $(base.options.configAce.tabListUl+">li[data-tab-url='"+e+"']")},getAllByURL:function(e){return $(base.options.configAce.tabListUl+">li[data-tab-url^='"+e+"']")},markChanged:function(){var e=this.getActive().find("a.ui-tabs-anchor");e.find("span").length<1&&(e.prepend("<span class='unsaved'><i class='fa fa-asterisk'></i></span>"),base.disableMenus())},markUnchanged:function(e){"object"!=typeof e&&(e=base.tab.get(e)),e.find("a.ui-tabs-anchor span").remove(),base.disableMenus()},hasChanged:function(e){return this.get(e).find("a.ui-tabs-anchor span").length>0},getURL:function(e){return this.get(e).data("tab-url")},getIdByURL:function(e){return this.getByURL(e).data("tab-id")},closeByURL:function(e){var t=this.getAllByURL(e);t.length>0&&t.each(function(){var e=$(this).data("tab-id");base.tab.close(e)})},updateFileById:function(e,t){this.__updateFile(this.get(e),t)},updateFileByURL:function(e,t){var a=this.getByURL(e);a.length<=0||this.__updateFile(a,t)},__updateFile:function(e,t){var a=e.data("tab-id"),s=e.data("tab-data");s.id=t.id,s.url=t.url,s.title=t.name,s.isNew=!1,e.attr("id","panel_nav_"+t.id).attr("data-tab-id",t.id).data("tab-id",t.id).attr("data-tab-url",t.url).data("tab-url",t.url).data("tab-data",s).attr("aria-controls","panel_"+t.id);var i=e.find("a.ui-tabs-anchor"),n=i.html();i.html(n.replace(n.replace(/<span.*?>.*?<\/span>/m,"").trim(),t.name)).attr("href","#panel_"+t.id),$(".tabdropdownfileslist li[data-tab-id='"+a+"']").attr("data-tab-id",t.id).data("tab-id",t.id).find(">span").html(t.name),$("div.ui-tabs-panel[data-tab-id='"+a+"']").attr("id","panel_"+t.id).attr("data-tab-id",t.id).data("tab-id",t.id).find("div.ace_editor").attr("id","editor_"+t.id);for(var o=0;o<=editors.length-1;o++)if(editors[o].id==a){editors[o].id=t.id;break}this.updateOpenState(s,a)},generateIdFromURL:function(e){return e.replace(/[^0-9a-zA-Z]+/g,"").toLowerCase()},openWelcome:function(){var e="editor/welcome";this.open({id:this.generateIdFromURL(e),url:e,title:"Welcome",type:this.Types.WELCOME})},openSystem:function(e){("undefined"==typeof e.id||null==e.id)&&(e.id=this.generateIdFromURL(e.url)),e.type=this.Types.SYSTEM,e.url.indexOf("database/connect")>-1&&(e.isDatabase=!0),this.open(e)},openRemoteSystem:function(e,t){e.isRemote=!0,e.remoteInfo=t,this.openSystem(e)},openFile:function(e){var t={id:e.id,url:e.url,title:e.name};t.isNew=""==e.url,t.isRemote="undefined"!=typeof e.isRemote&&e.isRemote,t.type=!t.isNew&&base.isImage(e.url)?this.Types.IMAGE:this.Types.EDITOR,"undefined"!=typeof e.content&&e.content&&(t.content=e.content),this.open(t)},openRemoteFile:function(e,t){var a={id:e.id,url:e.url,title:e.name,remoteInfo:t};a.isNew=!1,a.isRemote=!0,a.type=!a.isNew&&base.isImage(e.url)?this.Types.IMAGE:this.Types.EDITOR,this.open(a)},open:function(e){return"undefined"==typeof e.isActive?e.isActive=!0:e.isActive&&(e.isActive=base.stringToBoolean(e.isActive)),e?$(base.options.configAce.tabListUl).find("li#panel_nav_"+e.id).length>0?(e.isActive&&!$(base.options.configAce.tabListUl).find("li#panel_nav_"+e.id).hasClass("ui-tabs-active")&&this.activate(e.id),!1):("undefined"!=typeof e.isNew&&"string"==typeof e.isNew&&(e.isNew=base.stringToBoolean(e.isNew)),"undefined"!=typeof e.isRemote&&"string"==typeof e.isRemote&&(e.isRemote=base.stringToBoolean(e.isRemote)),e.type!=this.Types.EDITOR||e.isNew||base.getModeExtension(base.getExtension(e.url))?void this.__add(e):void $.notify("Invalid file.","error")):void 0},__add:function(e){this.__addTab(e),(e.isNew||"undefined"!=typeof e.content&&null!==e.content||!e.isActive&&!base.stringToBoolean(base.options.configAce.lazyloading))&&this.load(e),this.isProcessingMultipleTabs()||e.type==this.Types.WELCOME||e.type==this.Types.EDITOR&&e.isNew||this.saveOpenState(e),e.isActive&&this.activate(e.id)},__addTab:function(e){var t=this.getInstance().widget(),a=e.url?base.workspace.getNamedURL(e.url):e.title,s=$('<li class="unselected unsaved"><div class="tabbttn"><span class="name"><a href="#panel_'+e.id+'" title="'+a+'">'+e.title+"</a></span></div></li>").attr("id","panel_nav_"+e.id).attr("data-tab-id",e.id).attr("data-tab-url",e.url).data("tab-data",e).append('<a href="#" class="close"></a>').appendTo(t.find(".ui-tabs-nav")),i=$('<div id="panel_'+e.id+'" data-tab-id="'+e.id+'"><!-- New editor: '+e.id+": <br/> --></div>");return t.append(i),e.type!=this.Types.WELCOME&&this.__addToDropdown(e),this.refreshWidget(),s},__addEditor:function(e,t,a){("undefined"==typeof a||null==a)&&(a="");var s=$('<div id="editor_'+t.id+'" class="ace_editor">'+a+"</div>");e.append(s);var i=ace.edit("editor_"+t.id);ace.require("ace/ext/language_tools"),""!=base.options.configAce.setTheme&&i.setTheme("ace/theme/"+base.options.configAce.setTheme);var n=base.getModeExtension(base.getExtension(t.title));base.stringToBoolean(base.options.configAce.autoSetMode)&&""!=n?i.getSession().setMode("ace/mode/"+n):i.getSession().setMode("ace/mode/"+base.options.configAce.setMode),i.gotoLine(1),i.selection.getCursor(),i.session.getLength(),i.getSession().setTabSize(parseInt(base.options.configAce.setTabSize)),i.getSession().setUseWrapMode(base.options.configAce.setUseWrapMode),document.getElementById("editor_"+t.id).style.fontSize=base.options.configAce.fontSize,i.setShowPrintMargin(base.stringToBoolean(base.options.configAce.setShowPrintMargin)),i.setReadOnly(base.stringToBoolean(base.options.configAce.setReadOnly)),i.renderer.setShowGutter(base.options.configAce.showGutter),""!=base.options.configAce.folding&&i.getSession().setFoldStyle(base.options.configAce.folding),i.setHighlightActiveLine(base.options.configAce.highlightActiveLine),i.setDisplayIndentGuides(base.options.configAce.showIndentGuides),i.setShowInvisibles(base.options.configAce.showInvisibles),i.setBehavioursEnabled(base.options.configAce.enableBehaviors),i.setAnimatedScroll(base.options.configAce.animatedScroll),i.setAutoScrollEditorIntoView(),i.renderer.setScrollMargin(0,0),i.setOptions(base.options.configAce.setOptions);var o={ace:null,vim:require("ace/keyboard/vim").handler,emacs:"ace/keyboard/emacs"};i.setKeyboardHandler(o[base.options.configAce.keyBinding]),i.on("change",function(e){base.tab.markChanged()}),i.on("cut",function(e,t){clipboard=t.session.getTextRange(e)}),i.on("copy",function(e){clipboard=e}),i.getSession().selection.on("changeSelection",base.onSelectionChange),i.getSession().selection.on("changeCursor",base.onCursorChange),i.resize(),i.commands.bindKey("Ctrl-F",null),i.commands.bindKey("Command-F",null),editors.push({id:t.id,instance:i})},__addImage:function(e,t){var a=$('<div id="editor_'+t.id+'" class="ace_editor"><iframe class="imagetabframe" id="frame'+t.id+'" src="'+base.options.baseUrl+"image/load/?image="+unescape(t.url)+'"/></div><div class="clear"></div>'),s=a.find("iframe").get(0);base.key.hook(s.contentWindow||s.contentDocument),e.append(a),files.push({id:t.id})},__addStatic:function(newTabPanelElement,e){var newEditorElement=$('<div id="editor_'+e.id+'" class="ace_editor '+(e.type?e.type+"_tab":"")+" "+(e.isRemote?e.remoteInfo.type+"_tab":"")+'"><iframe class="tabframe'+(e.isDatabase?" databasetabframe":"")+'" id="frame'+e.id+'" src="'+e.url+"?"+(new Date).getTime()+'"/></div><div class="clear"></div>');newTabPanelElement.append(newEditorElement),files.push({id:e.id}),$("#frame"+e.id).load(function(){if(base.key.hook(this.contentWindow||this.contentDocument),!($(this).closest(".ace_editor").find(">.infopopupcontrols").length>0)){var frame_id=$(this).attr("id");$(this).contents().find("body").removeAttr("style");var _controls=$(this).contents().find("body").data("controls");if("undefined"!=typeof _controls){var controlls='<div class="clear"></div><div class="infopopupcontrols ontab"><div class="infopopupcontrolsinside">',_Obj=eval("["+_controls+"]");_Obj=_Obj.hasOwnProperty(0)?_Obj[0]:{},$.each(_Obj,function(e,t){_Obj[e];controlls=controlls+'<input type="submit" data-fram-id="'+frame_id+'"  data-action="'+_Obj[e]+'" class="button save tabsButton" value="'+e+'" name="save" />'}),controlls+='<div class="clear"></div></div><div class="clear"></div></div><div class="clear"></div>',$(this).parents(".ace_editor").append(controlls)}}})},activate:function(e){"object"!=typeof e&&(e=base.tab.get(e)),this.getInstance().option("active",this.getInstance().widget().find(".ui-tabs-nav li").index(e))},load:function(e,t){var a=this.get(e.id);this.startLoading(a);var s=$("#panel_"+e.id,this.getInstance().widget());if(e.type==this.Types.EDITOR){if(!e.isNew&&("undefined"==typeof e.content||null===e.content))return void $.get(base.options.baseUrl+"file/get?path="+unescape(e.url),function(i){base.tab.__addEditor(s,e,i),"undefined"!=typeof t&&t&&t(),base.tab.stopLoading(a)});this.__addEditor(s,e,e.content)}else e.type==this.Types.IMAGE?this.__addImage(s,e):this.__addStatic(s,e);this.stopLoading(a)},startLoading:function(e){e.removeClass("loaded").addClass("loading"),e.append("<span class='loader'><i class='fa fa-spin fa-spinner'></i></span>")},stopLoading:function(e){e.find(".loader").remove(),e.removeClass("loading").addClass("loaded")},refreshFile:function(e){return base.file.isChanged(e)?void $.alert.open({type:"confirm",content:"The file has been changed. The changes you have made will be lost if you refresh the file. Are you sure you want to continue?",buttons:{yes:"Yes",no:"No"},callback:function(t){if("yes"==t)base.tab.__refreshFile(e);else{var a=base.getEditorInstance(e);if(!a)return;a=a.instance,a.focus()}}}):this.__refreshFile(e)},__refreshFile:function(e){"object"!=typeof e&&(e=this.get(e));var t=e.data("tab-data");return this.startLoading(e),t.isRemote?base.ftp.__refreshRemoteFile(t,function(){$.get(base.options.baseUrl+"file/get?path="+unescape(t.url),function(t){base.tab.__refreshedFile(e,t)})}):void $.get(base.options.baseUrl+"file/get?path="+unescape(t.url),function(t){base.tab.__refreshedFile(e,t)})},__refreshedFile:function(e,t){var a=e.data("tab-data"),s=base.getEditorInstance(a.id);s&&(s=s.instance,s.setValue($("<div>"+t+"</div>").text(),-1),base.tab.markUnchanged(e),s.focus(),base.tab.stopLoading(e))},closeActive:function(){this.close(this.getActive())},close:function(tab){"object"!=typeof tab&&(tab=base.tab.get(tab));var data=tab.data("tab-data"),id=data.id,editor=base.getEditorInstance(id);if("undefined"!=typeof editor){var editor=editor.instance;editors.splice(editor.index,1),editor.destroy()}tab.remove(),$("div.editortabbar").find("#panel_"+id).remove(),this.__removeFromDropdown(data),data.type==this.Types.WELCOME&&(myLayout.open("west"),myLayout.open("east"),base.request({url:"editor/welcome_action",data:{action:"false"}})),data.isRemote&&(data.type==this.Types.EDITOR||data.type==this.Types.IMAGE?base.ftp.deleteRemoteTempFile(data.id):data.type==this.Types.SYSTEM&&base.ftp.disconnect(data.remoteInfo.connection)),this.isProcessingMultipleTabs()||(this.refreshWidget(),data.isRemote||data.type==this.Types.EDITOR&&data.isNew||this.removeOpenState(id,function(e){var _obj=eval(e);if(_obj&&_obj.hasOwnProperty("id")){var add=!0;if($("ul.dropdownrecent li").each(function(){var e=$(this).find("a").attr("data-tab-id");e==_obj.id&&(add=!1)}),add){var _options='<li class="child"><a href="javascript:void(0)" data-action="openRecentFile" data-action-type="calljs" data-tab-id="'+_obj.id+"\" data-tab-data='"+JSON.stringify(_obj)+"'><span>"+_obj.title+"</span></a></li>";$(".dropdownrecent").prepend(_options)}}}),base.prepareStage(),base.disableMenus())},__addToDropdown:function(e){var t=$(".tabdropdownfileslist"),a=$("li.tabfileitem",t).length,s=$("li.tabsystemitem",t).length,i=$("li.navsep",t),n=$("<li data-tab-id='"+e.id+"'><span>"+e.title+"</span></li>").appendTo(t);e.type!=this.Types.SYSTEM?(i.length>0?n.insertBefore(i):a>0?(n.appendTo(t),$("li.tabfileitem.last",t).removeClass("last"),n.addClass("last")):(n.prependTo(t),s>0&&(i=$("<li class='navsep'><span></span></li>").insertAfter(n),$("li.tabsystemitem.first",t).removeClass("first")),n.addClass("first")),n.addClass("tabfileitem")):(n.appendTo(t),s>0?$("li.last",t).removeClass("last"):a>0?i=$("<li class='navsep'><span></span></li>").insertBefore(n):n.addClass("first"),n.addClass("tabsystemitem"),n.hasClass("first")||n.addClass("last"))},__removeFromDropdown:function(e){var t=$(".tabdropdownfileslist");$("li[data-tab-id='"+e.id+"']",t).remove();var a=$("li.tabfileitem",t),s=$("li.tabsystemitem",t),i=a.length,n=s.length,o=$("li.navsep",t);if((0>=i||0>=n)&&o.length>0&&o.remove(),!(0>=i&&0>=n)){if(i>0){var r=$(a.get(0));if(r.hasClass("first")||r.removeClass("last").addClass("first"),i>1&&0>=n){var l=$(a.get(i-1));l.hasClass("last")||l.addClass("last")}}if(n>0){if(n>1||i>0){var l=$(s.get(n-1));l.hasClass("last")||l.addClass("last")}if(0>=i){var r=$(s.get(0));r.hasClass("first")||r.removeClass("last").addClass("first")}}}},__isProcessingMultipleTabs:!1,isProcessingMultipleTabs:function(){return this.__isProcessingMultipleTabs},startProcessingMultipleTabs:function(){this.__isProcessingMultipleTabs=!0},stopProcessingMultipleTabs:function(e){"undefined"==typeof e&&(e=!0),this.__isProcessingMultipleTabs=!1,e&&this.saveAllOpenState(),this.refreshWidget()},saveOpenState:function(e,t){return e.isRemote?!1:($.post(base.options.baseUrl+"editor/addactivity",{activity:e},function(e){"undefined"!=typeof t&&t(e)}),!0)},removeOpenState:function(e,t){return $.post(base.options.baseUrl+"editor/deleteactivity",{id:e},function(e){"undefined"!=typeof t&&t(e)}),!0},updateOpenState:function(e,t){return e.isRemote?!1:void $.post(base.options.baseUrl+"editor/updateactivity",{activity:e,id:t})},saveAllOpenState:function(e){var t=[];this.getInstance().widget().find(".ui-tabs-nav>li").each(function(){var e=$(this).data("tab-data");e.isNew||e.isRemote||t.push(e)}),t.length<=0||$.post(base.options.baseUrl+"editor/saveTabs",{tabs:t},function(t){"undefined"!=typeof e&&e(t)})}}}(),base.loadWorkshop=function(){base.workspace.reload()},base.loadDatabases=function(){base.database.reload()},base.disableMenus=function(e){base.tab.hasChanged(base.tab.getActiveId())?base.command.enable("saveFile"):base.command.disable("saveFile"),editors.length>0?base.command.enable("saveAs"):base.command.disable("saveAs");var t=$("#editorfilelist li a.ui-tabs-anchor span");t.length>0?base.command.enable("saveAll"):base.command.disable("saveAll");var t=$("#editorfilelist li");if(t.length>0?(base.command.enable("closeFile"),base.command.enable("closeAll")):(base.command.disable("closeFile"),base.command.disable("closeAll")),base.workspace.isSandboxAvailable()){base.command.enable("previewCurrentWorkspace");var a=base.tab.getActiveId();""==a||"undefined"==typeof base.getEditorInstance(a)||base.tab.isNewFile(a)?base.command.disable("previewActiveTab"):base.command.enable("previewActiveTab")}else base.command.disable("previewCurrentWorkspace"),base.command.disable("previewActiveTab");base.file.isSelected()&&!base.file.isRootSelected()?base.file.isZipSelected()?(base.command.disable("compress"),base.command.disable("compressAs"),base.command.enable("extract"),base.command.enable("extractInto")):(base.command.enable("compress"),base.command.enable("compressAs"),base.command.disable("extract"),base.command.disable("extractInto")):(base.command.disable("compress"),base.command.disable("compressAs"),base.command.disable("extract"),base.command.disable("extractInto"))},base.welcome=function(){base.tab.openWelcome()},base.initActivity=function(){$('<iframe id="activityinitializer" src="'+base.options.baseUrl+'editor/getactivity/" style="display: none;" />').appendTo("body").on("load",function(n){var elmnts=$(this).contents().find("html:first").find("body:first").html();if($("iframe#activityinitializer").remove(),""!=elmnts){var json=eval("("+elmnts+")"),array=[];if(null===json)return base.stringToBoolean(base.options.configAce.enableWelcome)&&base.tab.openWelcome(),base.finished(),!1;$.each(json,function(e,t){array.push(new Array(e,t))});var len="undefined"!=typeof array.length?array.length:0,cIndex=0;base.tab.startProcessingMultipleTabs(),base.initActivity.initializing=function(){len>cIndex?(base.tab.open(array[cIndex][1]),$("#"+array[cIndex][0]).prop("checked",!0),timer=setTimeout(function(){base.initActivity.initializing()},500)):(clearTimeout(timer),base.finished(),base.tab.stopProcessingMultipleTabs(!1)),cIndex++},base.stringToBoolean(base.options.configAce.enableWelcome)?(base.tab.openWelcome(),timer=setTimeout(function(){base.initActivity.initializing()},500)):base.initActivity.initializing()}})},base.finished=function(){base.prepareStage(),$(".initialize").delay(1e3).fadeOut(500,function(){$(".initialize").remove()})},base.popup=function(e){var t="undefined"!=typeof e.data("action")&&""!=e.data("action")?e.data("action"):e.data("file-url");$("#popupHandle").attr("href",t),$("#popupHandle.scpopuplink").data("title",e.data("title")),$("#popupHandle").trigger("click")},base.openPopup=function(e){var modal="undefined"==typeof e.modaless||!e.modaless,id=base.tab.generateIdFromURL(e.url.replace(/\?[^.]*/g,"")),popupEle=$("#popup"+id);if(popupEle.length<=0){var url=base.options.baseUrl+e.url;url+=(url.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime();var onloadPopup=function(){var iframeWnd=this.contentWindow||this.contentDocument;modal||base.key.hook(iframeWnd),iframeWnd.POPUP_ID=id;var iframeBody=$(this).contents().find("body");iframeBody.data("popup-id",id);var popupEle=$(this).parent(),dlg=popupEle.dialog("instance"),buttons=[],_controls=iframeBody.data("controls");if(_controls){var _Obj=eval("["+_controls+"]");_Obj=_Obj.hasOwnProperty(0)?_Obj[0]:{},$.each(_Obj,function(e,t){buttons[buttons.length]={text:e,click:function(){var e=$(this).find("iframe").get(0),a=e.contentWindow||e.contentDocument,s=a[t];return"undefined"==typeof s?void console.warn(t+" is not defined in the popup."):void s()}}})}dlg.option("buttons",buttons);var _h=iframeBody.data("height"),_w=iframeBody.data("width");_w="undefined"!=typeof _w?parseFloat(_w):iframeBody[0].scrollWidth,_h="undefined"!=typeof _h?parseFloat(_h):iframeBody[0].scrollHeight,dlg.widget().css({opacity:1}),dlg.option({width:_w+20+26,height:_h+10+26+35,position:{my:"center center",at:"center center",of:"body"}})};$("<div class='popup' id='popup"+id+"' data-popup-id='"+id+"'></div>").append($("<iframe>",{id:"popupcontent"+id,src:url,load:onloadPopup})).dialog({appendTo:"body",closeOnEscape:!0,title:e.title,modal:modal,width:"auto",height:"auto",maxWidth:$("body").width(),maxHeight:$("body").height(),close:function(e,t){$(this).dialog("instance").destroy()}})}else popupEle.dialog("instance").open()},base.closePopup=function(e){"undefined"==typeof e&&(e=base.popupId),e&&$("#popup"+e).dialog("instance").destroy()},base.notify=function(){
var e=base.thisEl;$.notify(e.msg,e.type)},base.onCursorChange=function(){if(""!=base.options.configAce.folding&&"manual"!=base.options.configAce.folding&&"active"==base.options.configAce.statusBar&&"active"==base.options.configAce.tagBar){if(""==base.tab.getActiveId()||"undefined"==typeof base.getEditorInstance(base.tab.getActiveId()))return;for(var e=base.getEditorInstance(base.tab.getActiveId()).instance,t=e.session.selection.getSelectionAnchor(),a=[],s={start:{row:t.row,column:0},end:t};s;){var i=e.session.getTextRange(s),n=i.trim();if(0==n.indexOf("<")){for(var o=n.split(/[\s>]/),r=[],l=0,c=0;c<o.length;c++){var d=o[c];if(d&&""!=d&&0==d.indexOf("<")){d=d.substr(1);var p=i.indexOf(d);if(i=i.substr(p+d.length+1),l+=p,0==d.indexOf("/"))r.length>0&&r[a.length-1]==d.substr(1)&&(r=r.splice(r.length-1));else{var f={name:d,range:{start:{row:s.start.row,column:l},end:{row:s.start.row,column:l+d.length}}};r.push(f)}l+=d.length+1}}for(var c=r.length-1;c>=0;c--)a.unshift(r[c])}(s=e.session.getParentFoldRangeData(s.start.row).range)&&(s={start:{row:s.start.row,column:0},end:{row:s.start.row,column:e.session.getLine(s.start.row).length-1}})}e.session.getTextRange({start:{row:t.row,column:0},end:t});for(var u=$("#statusbar #tagbar").empty().hide(),c=0,f=null;f=a[c++];)$("<span />").addClass("spathtag"+(0==c?" first":"")+(c==a.length-1?" last":"")).html("&lt;"+f.name+"&gt;").data("range",f.range).appendTo(u);u.show()}base.onSelectionChange()},base.onSelectionChange=function(){if(""!=base.tab.getActiveId()&&"undefined"!=typeof base.getEditorInstance(base.tab.getActiveId())){var e=base.getEditorInstance(base.tab.getActiveId()).instance,t=e.session.selection.getSelectionAnchor(),a=base.getEditorMode(base.getExtension(base.getFileName(base.tab.getActiveId()))),s=e.session.getTextRange(e.getSelectionRange()).length,i=base.formatSizeUnits(s)+" Ln: "+t.row+" Col: "+t.column+" - "+a;$("#statusbar .linecolformat").html(i);var n="editor/search",o=base.tab.generateIdFromURL(n),r=$("#popupcontent"+o);if(r.length>0){var l=e.selection.getRange(),c=r[0].contentWindow||r[0].contentDocument;c.enableReplaceInSelection(l.start.row==l.end.row&&l.start.column==l.end.column)}}},base.getEditorMode=function(e){return base.editorModeAndFileNameMaping().hasOwnProperty(e)?base.editorModeAndFileNameMaping()[e]:e},base.editorModeAndFileNameMaping=function(){var e={appcache:"Plain Text",as:"Action Script",ascx:"ASP.NET",ashx:"ASP.NET",asmx:"ASP.NET",aspx:"ASP.NET",asx:"ASP.NET",axd:"ASP.NET",c:"C Source",cc:"C++",cl:"Common Lisp","class":"Java",clj:"Clojure",cmx:"OCaml",cmxa:"OCaml",coffee:"CoffeeScript",config:"Plain Text",cpp:"C++",crt:"CRT",cs:"C#",csh:"C Shell Script",css:"CSS",csv:"CSV",cxx:"C++",d:"D",diff:"diff",dtd:"DTD",dylan:"Dylan",e:"Eiffel",ecl:"ECL",ejs:"Embedded JavaScript",engine:"Plain Text",f:"Fortran",f2k:"Fortran",f90:"Fortran",f95:"Fortran",feature:"Gherkin","for":"Fortran",fs:"F#",fsi:"F#",fsscript:"F#",fsx:"F#",gas:"Gas",go:"Go",groovy:"Groovy",gsh:"Groovy",gvy:"Groovy",gy:"Groovy",h:"C++",haml:"HAML",hs:"Haskell",htaccess:"HTACCESS",htm:"HTML",html:"HTML",hx:"Haskell",hxx:"C++",inc:"PHP",ini:"Plain Text",install:"Plain Text",jade:"Jade",jar:"Java Archive",java:"Java Source",jl:"Julia",js:"JavaScript",jsp:"Java Server Pages",json:"JSON",jsonld:"JSON-LD",kt:"Kotlin",las:"Haskell",less:"LESS",lhs:"Haskell",lisp:"Common Lisp",litcoffee:"CoffeeScript",latex:"LaTex",ls:"LiveScript",ltx:"LaTex",lua:"Lua",m:"Octave",master:".NET",md:"Markdown",markdown:"Markdown",ml:"OCaml",mli:"OCaml",mrc:"mIRC",nt:"NTriples",pas:"Pascal",pascal:"Pascal",php:"PHP",php3:"PHP",php4:"PHP",phtml:"PHP",pig:"Pig",pl:"Perl",pp:"Puppet",profile:"Plain Text",properties:"Properties File",py:"Python",r:"R",rb:"Ruby",rest:"reStructuredText",restx:"reStructuredText",rs:"Rust",rst:"reStructuredText",sass:"SASS",scala:"Scala",scm:"Scheme",script:"Plain Text",scss:"SCSS",sh:"Shell",sieve:"Sieve",slim:"Slim",smd:"Scheme",sql:"SQL",ss:"Scheme",st:"Smalltalk",sv:"SystemVerilog",svh:"Verilog","svn-base":"Plain Text",tcl:"Tcl",test:"Plain Text",tex:"LaTex",tmpl:"Plain Text",tpl:"SmartyMixed",ts:"TypeScript",txt:"Plain Text",v:"Verilog",vb:"VB.NET",vbs:"VBScript",vh:"Verilog",vm:"Velocity",xhtml:"HTML",xml:"XML",xq:"XQuery",xql:"XQuery",xqm:"XQuery",xquery:"XQuery",xqws:"XQuery",xqy:"XQuery",xsl:"XML",xslt:"XML",yaml:"YAML",yml:"YAML",z80:"Z80"};return e},base.resetConfiguration=function(e){switch($.each(editors,function(t,a){switch(e.key){case"setTabSize":a.instance.getSession().setTabSize(e.value),base.options.configAce.setTabSize=e.value;break;case"setTheme":a.instance.setTheme("ace/theme/"+e.value),base.options.configAce.setTheme=e.value;break;case"setMode":a.instance.getSession().setMode("ace/mode/"+e.value),base.options.configAce.setMode=e.value;break;case"fontSize":$(".ace_editor").css({"font-size":e.value}),base.options.configAce.fontSize=e.value;break;case"setUseWrapMode":a.instance.getSession().setUseWrapMode(base.stringToBoolean(e.value)),base.options.configAce.setUseWrapMode=e.value;break;case"setReadOnly":a.instance.setReadOnly(base.stringToBoolean(e.value)),base.options.configAce.setReadOnly=e.value;break;case"setShowPrintMargin":a.instance.setShowPrintMargin(base.stringToBoolean(e.value)),base.options.configAce.setShowPrintMargin=e.value;break;case"get_autocomplete":a.instance.setOptions({enableBasicAutocompletion:base.stringToBoolean(e.value)}),base.options.configAce.setOptions={enableBasicAutocompletion:base.stringToBoolean(e.value)};break;case"editor_show_indent_guides":a.instance.setDisplayIndentGuides(base.stringToBoolean(e.value));break;case"editor_show_gutter":a.instance.renderer.setShowGutter(base.stringToBoolean(e.value));break;case"editor_code_folding":a.instance.getSession().setFoldStyle(e.value);break;case"editor_key_binding":var s={ace:null,vim:require("ace/keyboard/vim").handler,emacs:"ace/keyboard/emacs"};base.options.configAce.keyBinding=e.value,a.instance.setKeyboardHandler(s[base.options.configAce.keyBinding]);break;case"editor_soft_wrap":a.instance.session.setOption("wrap",e.value);break;case"editor_highlight_line":a.instance.setHighlightActiveLine(base.stringToBoolean(e.value));break;case"editor_show_invisibles":a.instance.setShowInvisibles(base.stringToBoolean(e.value));break;case"editor_enable_behaviors":a.instance.setBehavioursEnabled(base.stringToBoolean(e.value));break;case"elastic_tabstops":a.instance.setOption("useElasticTabstops",base.stringToBoolean(e.value));break;case"js_jshint_enable":a.instance.setOption("useWorker",base.stringToBoolean(e.value));break;case"show_token_info":a.instance.setOption("showTokenInfo",base.stringToBoolean(e.value));break;case"editor_selection_style":a.instance.setOption("selectionStyle",e.value);break;case"editor_animated_scroll":a.instance.setAnimatedScroll(base.stringToBoolean(e.value))}}),e.key){case"editor_page_theme":$("[data-default-theme]").each(function(t,a){if("undefined"!=typeof $(this).data("default-theme")&&""!=$(this).data("default-theme"))if("undefined"==typeof $(this).data("src")||""==$(this).data("src")){var s=$(this).attr("href"),i=s.replace($(this).data("default-theme"),e.value);$(this).attr("data-src",s),$(this).attr("href",i)}else{var s=$(this).data("src"),i=s.replace($(this).data("default-theme"),e.value);$(this).attr("href",i)}}),$("iframe").each(function(t,a){$(this).contents().find("[data-default-theme]").each(function(){if("undefined"!=typeof $(this).attr("data-default-theme")&&""!=$(this).attr("data-default-theme"))if("undefined"==typeof $(this).attr("data-src")||""==$(this).attr("data-src")){var t=$(this).attr("href"),a=t.replace($(this).attr("data-default-theme"),e.value);$(this).attr("data-src",t),$(this).attr("href",a)}else{var t=$(this).attr("data-src"),a=t.replace($(this).attr("data-default-theme"),e.value);$(this).attr("href",a)}})});break;case"cancleeditor_page_theme":$("[data-default-theme]").each(function(e,t){"undefined"!=typeof $(this).data("src")&&""!=$(this).data("src")&&$(this).attr("href",$(this).data("src"))}),$("iframe").each(function(e,t){$(this).contents().find("[data-default-theme]").each(function(){"undefined"!=typeof $(this).data("src")&&""!=$(this).data("src")&&$(this).attr("href",$(this).data("src"))})});break;case"statusbar":$("#statusbar").removeClass("active").removeClass("inactive").addClass(e.value),base.options.configAce.statusBar=e.value,base.prepareStage();break;case"tagbar":$("#tagbar").removeClass("active").removeClass("inactive").addClass(e.value),base.options.configAce.tagBar=e.value,base.prepareStage();break;case"toolbar_enable":base.options.configAce.toolbar=1==e.value?"true":"false";break;case"search_collapse":base.options.configAce.search_collapse=1==e.value?"true":"false"}console.log(e)},base.quit=function(){window.location=base.options.baseUrl},base.logOut=function(){window.location=base.options.baseUrl+"guest/logout"},base.stringToBoolean=function(e){switch(e.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}},base.extensionMapping=function(){var e={action:"java",appcache:"plain_text",as:"actionscript",ascx:"dot",ashx:"dot",asmx:"dot",asp:"dot",asx:"dot",aspx:"dot",axd:"dot",bat:"batchfile",btm:"batchfile",c:"c_cpp",cc:"c_cpp",cfm:"coldfusion",cfml:"coldfusion",cl:"plain_text","class":"java",clj:"clojure",cmx:"ocaml",cmxa:"ocaml",coffee:"coffee",config:"plain_text",cpp:"c_cpp",crt:"plain_text",css:"css",cs:"csharp",csh:"plain_text",csv:"plain_text",cxx:"c_cpp",d:"d",diff:"diff",dist:"plain_text","do":"java",dpj:"java",dtd:"plain_text",dylan:"plain_text",e:"eiffel",ecl:"plain_text",ejs:"ejs",engine:"plain_text",erb:"ruby",f:"plain_text",f2k:"plain_text",f90:"plain_text",f95:"plain_text",feature:"gherkin","for":"plain_text",fs:"plain_text",fsi:"plain_text",fsscript:"plain_text",fsx:"plain_text",gas:"plain_text",gitattributes:"plain_text",gitignore:"gitignore",go:"plain_text",groovy:"groovy",gsh:"groovy",gvy:"groovy",gy:"groovy",h:"c_cpp",haml:"haml",hdl:"c_app",hpp:"c_cpp",hs:"haskell",htaccess:"plain_text",htm:"html",html:"html",hx:"haskell",hxx:"c_cpp",inc:"php",ini:"ini",install:"plain_text",jade:"jade",jar:"java",java:"java",jhtml:"html",jar:"java",jl:"julia",js:"javascript",json:"json",jsonld:"plain_text",jsp:"java",jspx:"java",kt:"plain_text",las:"haskell",latex:"latex",less:"less",lock:"plain_text",ltx:"latex",lhs:"haskell",lisp:"lisp",litcoffee:"coffee",log:"plain_text",ls:"livescript",lua:"lua",m:"objectivec",master:"csharp",md:"markdown",markdown:"markdown",ml:"ocaml",mli:"ocaml",module:"plain_text",mrc:"plain_text",nt:"plain_text",pas:"pascal",pascal:"pascal",php:"php",php3:"php",php4:"php",phtml:"php",pig:"plain_text",pl:"perl",pot:"plain_text",pp:"plain_text",profile:"plain_text",properties:"properties",py:"python",pm:"perl",r:"r",rb:"ruby",rest:"plain_text",restx:"plain_text",rhtml:"ruby",rjs:"ruby",rs:"rust",rss:"xml",rst:"plain_text",sass:"sass",scala:"scala",script:"plain_text",scss:"scss",sh:"sh",sieve:"plain_text",slim:"plain_text",smd:"scheme",smf:"matlab",sms:"matlab",sql:"mysql",ss:"scheme",st:"plain_text",sv:"verilog",svg:"svg",svh:"verilog","svn-base":"plain_text",tcl:"tcl",tex:"latex",test:"plain_text",tmpl:"plain_text",tpl:"smarty",ts:"typescript",txt:"plain_text",twig:"plain_text",xhtml:"html",xml:"xml",xq:"xquery",xql:"xquery",xqm:"xquery",xquery:"xquery",xqws:"xquery",xqy:"xquery",xrb:"xml",xsl:"xml",xslt:"xml",v:"verilog",vb:"vbscript",vbs:"vbScript",vh:"verilog",vm:"velocity",wss:"java",yaml:"yaml",yml:"yaml",yaws:"erlang",z80:"plain_text"};return e},base.undefined=function(){alert("Sorry this method is not available in this theme.")},base.generateUniqueId=function(){return(new Date).getTime()+Math.floor(1e4*Math.random())},base.htmlentities=function(e){return jQuery("<div />").text(e).html().replace(/\\/g,"")},base.prepareStage=function(){$("#statusbar").removeAttr("class").addClass(base.options.configAce.statusBar),$("#tagbar").empty().removeClass("active inactive").addClass(base.options.configAce.tagBar),$(".editortoolbarheader").removeClass("inactive"),base.stringToBoolean(base.options.configAce.toolbar)||$(".editortoolbarheader").addClass("inactive"),(base.tab.getCount()<=0||!base.tab.getActiveId()||!base.tab.isEditor(base.tab.getActiveId()))&&($("#statusbar").removeAttr("class").addClass("inactive"),$(".editortoolbarheader").addClass("inactive"));var e=0;$(".footertoolbar").is(":visible")&&(e=$(".footertoolbar").height());var t=0;base.flagFull||(t=$(".headertoolbar").height()+4);var a=$(".editortabbar").height(),s=$(window).height()-(e+t+a),i=0;$(".headertoolbar").is(":visible")&&(i=$("#statusbar").height());var n=0;if($(".editortoolbarheader").is(":visible")&&(n=$(".editortoolbarheader").height()),$(".ace_editor").each(function(){$(this).css({height:s-(i+n)+"px","margin-top":n+"px"})}),$.each(editors,function(e,t){t.instance.resize()}),$("ul.tabdropdownfileslist>li").length>0){var o=$("ul#editorfilelist"),r=o.parent().width(),l=0,c=$(">li",o);if(c.length>0&&c.each(function(){l+=$(this).width()}),l>r){var d=$(">li.ui-tabs-active",o);if(d.length>0){var p=d.position().left,f=p+d.width(),u=o.position().left;0>p+u?u=-p:f+u>r&&(u=r-f),0>u&&l>r&&r-l>u?u=r-l:r>=l&&(u=0),o.css("left",u+"px")}$(".tabcontrolarrow.arrowleft, .tabcontrolarrow.arrowright").show()}else o.css("left","0"),$(".tabcontrolarrow.arrowleft, .tabcontrolarrow.arrowright").hide();$(".tabcontrolarrow.arrowdown").show()}else $(".tabcontrolarrow.arrowleft, .tabcontrolarrow.arrowright, .tabcontrolarrow.arrowdown").hide();base.onSelectionChange()},base.getOpenIn=function(e){if("undefined"!=typeof e&&""!=e.toString()){var t=e.toString().split("-");return"undefined"!=typeof t[1]?t[1]:"editor"}},base.isEdited=function(e){return $(base.options.configAce.tabListUl+">li#panel_nav_"+e).find("a.ui-tabs-anchor span")},base.openRecentFile=function(){var e=$(base.thisEl),t=e.data("tab-data");base.tab.open(t)},base.getEditorInstance=function(e){for(var t=0;t<=editors.length-1;t++)if(editors[t].id==e)return{instance:editors[t].instance,index:t}},base.newFromTemplatePopup=function(){},base.saveAsPopup=function(){},base.findPopup=function(){},base.replacePopup=function(){},base.findInFilesPopup=function(){},base.goToFilePopup=function(){},base.goToLinePopup=function(){},base.keyboardShortcutsPopup=function(){},base.changeLogPopup=function(){},base.aboutPopup=function(){},base.getFileName=function(e){return $.trim($(base.options.configAce.tabListUl+">li#panel_nav_"+e).find("a.ui-tabs-anchor").html().replace(/<span.*?>.*?<\/span>/m,""))},base.selectFile=function(e){return base.file.select(e)},base.getSelectedFile=function(){return base.file.getAllSelected()},base.deselectFile=function(){return base.file.deselect()},base.newFile=function(e){base.file._new(e)},base.fileNewFromContext=function(e,t){base.file._newFromContext(e,t)},base.fileDelete=function(){base.file._delete()},base.dirNew=function(e){base.file._newDir(e)},base.flagFull=!1,base.fullScreen=function(){launchFullscreen($("#mainContent")[0])},document.addEventListener("fullscreenchange",function(){base.onFullscreenChange(document.fullscreenElement)},!1),document.addEventListener("msfullscreenchange",function(){base.onFullscreenChange(document.msFullscreenElement)},!1),document.addEventListener("mozfullscreenchange",function(){console.log("here: "+document.mozFullScreen),base.onFullscreenChange(document.mozFullScreen)},!1),document.addEventListener("webkitfullscreenchange",function(){base.onFullscreenChange(document.webkitIsFullScreen)},!1),base.onFullscreenChange=function(e){this.flagFull=e,this.flagFull?$("#mainContent").addClass("fullscreen"):$("#mainContent").removeClass("fullscreen"),base.prepareStage()},base.fileHasBeenOpened=function(){var e=$("#openner").val(),t=document.getElementById("openner").files;if(!t.length)return void alert("Please select a file.");var a=t[0],s=0,i=a.size-1,n=new FileReader;n.onloadend=function(t){if(t.target.readyState==FileReader.DONE){var a=e.split("/").pop().split("\\").pop();base.openFile({id:base.generateUniqueId(),name:a,content:base.htmlentities(t.target.result)})}};var o=a.slice(s,i+1);n.readAsBinaryString(o),$("#openner").val("")},base.fileOpen=function(){$("#openner").click()},base.saveFile=function(){editors.length>0&&base.file.save(base.tab.getActiveId())},base.saveAll=function(){base.file.saveAll()},base.closeFile=function(){base.file.close(base.tab.getActiveId())},base.getModeExtension=function(e){return base.extensionMapping().hasOwnProperty(e)?base.extensionMapping()[e]:""},base.getExtension=function(e){return base.file.getExtension(e)},base.closeAll=function(){$('[data-action="closeAllFiles"]').parent().hasClass("disable")||base.file.closeAll()},base.toggleLineComment=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;active_editor=e.commands,active_editor.exec("togglecomment",e)},base.lineComment=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance,t=e.getSelectionRange().start.row,a=e.session.getLine(t);e.find(a),e.replace("//"+a)},base.lineUncomment=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.findPrevious("//"),e.replace("")},base.blockComment=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;if(e.getSelectionRange().start.row==e.getSelectionRange().end.row){var t=e.getSelectionRange().start.row,a=e.session.getLine(t);e.find(a),e.replace("/*"+a+"*/")}else{e.find(e.session.getTextRange(e.getSelectionRange()));var s=e.session.getTextRange(e.getSelectionRange());e.replace("/*"+s+"*/")}},base.blockUncomment=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.findPrevious("/*"),e.replace(""),e.find("*/"),e.replace("")},base.toUpperCase=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.find(e.session.getTextRange(e.getSelectionRange())),e.replace(e.getCopyText().toUpperCase())},base.toLowerCase=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.find(e.session.getTextRange(e.getSelectionRange())),e.replace(e.session.getTextRange(e.getSelectionRange()).toLowerCase())},base.showAutocomplete=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;base.options.configAce.setOptions.enableBasicAutocompletion=!base.options.configAce.setOptions.enableBasicAutocompletion,e.setOptions({enableBasicAutocompletion:base.options.configAce.setOptions.enableBasicAutocompletion}),$.ajax({type:"POST",url:"editor/configSave",data:"editor_page_theme=get_autocomplete&val="+base.options.configAce.setOptions.enableBasicAutocompletion}).done(function(e){base.options.configAce.autoSetMode=base.options.configAce.setOptions.enableBasicAutocompletion}).error(function(e){alert(e.message)})},base.selectAll=function(){base.getEditorInstance(base.tab.getActiveId()).instance.session.selection.selectAll()},base.replace=function(){base.file.openSearchDialog("replace")},base.find=function(){base.file.openSearchDialog("find")},base.showSearchResults=function(){base.file.showSearchResults()},base.redo=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;active_editor=e.commands,active_editor.exec("redo",e)};var clipboard=null;base.cut=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance,t=e.session.getTextRange(e.getSelectionRange());t&&(e.remove(e.getSelectionRange()),clipboard=t),e.focus()},base.copy=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance,t=e.session.getTextRange(e.getSelectionRange());t&&(clipboard=t),e.focus()},base.paste=function(){if(null!==clipboard){var e=base.getEditorInstance(base.tab.getActiveId()).instance,t=e.getSelectionRange();e.session.remove(t),e.session.insert(t.start,clipboard),e.focus()}},base.undo=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;active_editor=e.commands,active_editor.exec("undo",e)},base.indent=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;active_editor=e.commands,active_editor.exec("indent",e)},base.outdent=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;active_editor=e.commands,active_editor.exec("outdent",e)},base.findNext=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.findNext()},base.findPrevious=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.findPrevious()},base.getFileNameWithExt=function(e){var t=unescape(e).split("/");return t[t.length-1]},base.isImage=function(e){var t=unescape(e).split("/"),a=t[t.length-1],s=a.split("."),i=s[s.length-1];return base.options.configAce.imageExtension.indexOf(i)>=0?!0:!1},base.replaceNext=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;$('button[action="replaceAndFindNext"]').click(),e.findNext()},base.gotoLine=function(e){var t=base.getEditorInstance(base.tab.getActiveId()).instance;t.gotoLine(e)},base.getCurrentLine=function(e){var t=base.getEditorInstance(base.tab.getActiveId()).instance;return t.getSelectionRange().start.row+1},base.support=function(){window.open("http://support.scriptsconnect.com","_blank")},base.changeThemeAmbiance=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/ambiance")},base.changeThemeChaos=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/chaos")},base.changeThemeClouds=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/clouds")},base.changeThemeCloudsMidnight=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/clouds_midnight")},base.changeThemeCobalt=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/cobalt")},base.changeThemeEclipse=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/eclipse")},base.changeThemeIdlefingers=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/idle_fingers")},base.changeThemekrTheme=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/kr_theme")},base.changeThemeMerbivore=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/merbivore")},base.changeThemeMerbivoreSoft=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/merbivore_soft")},base.changeThemeMonokai=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/monokai")},base.changeThemeMonoIndustrial=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/mono_industrial")},base.changeThemePastelonDark=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/pastel_on_dark")},base.changeThemeRunnableDark=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/runnable_dark")},base.changeThemeRunnableLight=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/runnable_light")},base.changeThemeSolarizedDark=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/solarized_dark")},base.changeThemeTerminal=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/terminal")},base.changeThemeTomorrowNight=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/tomorrow_night")},base.changeThemeTomorrowNightBlue=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/tomorrow_night_blue")},base.changeThemeTomorrowNightBright=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/tomorrow_night_bright")},base.changeThemeTomorrowNight80s=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/tomorrow_night_eighties")},base.changeThemeTwilight=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/twilight")},base.changeThemeVibrantInk=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/vibrant_ink")},base.changeThemeVisualStudio=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setTheme("ace/theme/visualstudio")},base.pageThemeDark=function(){$.ajax({type:"POST",url:"editor/configSave",data:"editor_page_theme=editor_page_theme&val=dark"}).done(function(e){location.reload()}).error(function(e){alert(e.message)})},base.pageThemeLight=function(){$.ajax({type:"POST",url:"editor/configSave",data:"editor_page_theme=editor_page_theme&val=light"}).done(function(e){location.reload()}).error(function(e){alert(e.message)})},base.pageThemeMystic=function(){$.ajax({type:"POST",url:"editor/configSave",data:"editor_page_theme=editor_page_theme&val=mystic"}).done(function(e){location.reload()}).error(function(e){alert(e.message)})},base.pageThemeSmoke=function(){$.ajax({type:"POST",url:"editor/configSave",data:"editor_page_theme=editor_page_theme&val=smoke"}).done(function(e){location.reload()}).error(function(e){alert(e.message)})},base.replacePrevious=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance;$("#replaceButton").click(),e.findPrevious()},base.replaceAll=function(){base.getEditorInstance(base.tab.getActiveId()).instance;$('button[action="replaceAll"]').click()};var font;base.increaseFontSize=function(){"undefined"==typeof font?(font=base.options.configAce.fontSize,font=font.split("p"),font=font[0],font=parseInt(font)+2):font+=2;var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setFontSize(font+"px")},base.decreaseFontSize=function(){"undefined"==typeof font?(font=base.options.configAce.fontSize,font=font.split("p"),font=font[0],font=parseInt(font)-2):font-=2;var e=base.getEditorInstance(base.tab.getActiveId()).instance;e.setFontSize(font+"px")},base.changeSyntaxJavaScript=function(){for(var e=0;e<=editors.length-1;e++){var t=editors[e].instance;t.getSession().setMode("ace/mode/javascript")}},base.wrapLines=function(){base.options.configAce.setUseWrapMode=!base.options.configAce.setUseWrapMode;for(var e=0;e<=editors.length-1;e++){var t=editors[e].instance;t.getSession().setUseWrapMode(base.options.configAce.setUseWrapMode)}$.ajax({type:"POST",url:"editor/configSave",data:"editor_page_theme=editor_toggle_word_wrapping&val="+base.options.configAce.setUseWrapMode}).done(function(e){base.options.configAce.autoSetMode=!1}).error(function(e){alert(e.message)})},base.wrapToViewport=function(){for(var e=0;e<=editors.length-1;e++){var t=editors[e].instance;t.getSession().setUseWrapMode(!0)}},base.beautifyAll=function(){beautify()},base.beautifySelection=function(){beautify(1)},base.stripWhitespace=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance,t={};t.needle="  ",e.$search.set(t);e.replaceAll("",t);e.focus()},base.stripWhitespaceSelected=function(){var e=base.getEditorInstance(base.tab.getActiveId()).instance,t={};t.needle="  ",t.replaceInSelection=!0,t.range=e.selection.getRange(),e.$search.set(t);e.replaceAll("",t);e.focus()},base.fileOutputPreview=function(){console.log("Clicked: Preview")},base.formatSizeUnits=function(e){return e>=1e9?e=(e/1e9).toFixed(2)+" GB":e>=1e6?e=(e/1e6).toFixed(2)+" MB":e>=1e3?e=(e/1e3).toFixed(2)+" KB":e>1?e+=" bytes":1==e?e+=" byte":e="",""!=e?"("+e+")":""},base.print=function(){var e=base.getEditorInstance(base.tab.getActiveId());if(!e)return void $.notify("No active documents.","warn");e=e.instance;var t=e.container.style.height,a=$(e.container).parent();$("body").append(e.container),e.container.style.height=e.renderer.layerConfig.maxHeight+"px",e.resize(!0),window.print(),e.container.style.height=t,e.resize(!0),a.append(e.container)},base.refresh=function(){base.tab.refreshFile(base.tab.getActiveId())},base.key=function(){var hook=function(e){$(e).keydown(function(e){return base.key.keydown(e.keyCode),base.key.process(e,e.keyCode)?(e.preventDefault(),e.cancelBubble=!0,!1):void 0}),$(e).keyup(function(e){base.key.clear()}),$(e).focus(function(e){base.key.clear()})};hook(window);var mixin=function(e,t){for(var a in t)e[a]=t[a];return e},Keys=function(){var e,t,a={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{Ctrl:1,Alt:2,Option:2,Shift:4,Super:8,Meta:8,Command:8,Cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(t in a.FUNCTION_KEYS)e=a.FUNCTION_KEYS[t].toLowerCase(),a[e]=parseInt(t,10);for(t in a.PRINTABLE_KEYS)e=a.PRINTABLE_KEYS[t].toLowerCase(),a[e]=parseInt(t,10);return mixin(a,a.MODIFIER_KEYS),mixin(a,a.PRINTABLE_KEYS),mixin(a,a.FUNCTION_KEYS),a.enter=a["return"],a.escape=a.esc,a.del=a["delete"],a[173]="-",function(){for(var e=["Cmd","Ctrl","Alt","Shift"],t=Math.pow(2,e.length);t--;)a.KEY_MODS[t]=e.filter(function(e){return t&a.KEY_MODS[e]}).join("-")+"-"}(),a.KEY_MODS[0]="",a.KEY_MODS[-1]="input",a}(),os=(navigator.platform.match(/mac|iPad|iPod|iPod touch|iPhone|win|linux/i)||["other"])[0].toLowerCase(),ua=navigator.userAgent,isMac="mac"==os||"ipad"==os||"ipod"==os||"ipod touch"==os||"iphone"==os;isMac?$(".shortcut-key-win").hide():$(".shortcut-key-mac").hide();var isLinux="linux"==os,isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((ua.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((ua.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),isOldIE=isIE&&9>isIE,isGecko=isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,isOldGecko=isGecko&&parseInt((ua.match(/rv\:(\d+)/)||[])[1],10)<4,isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),isWebKit=parseFloat(ua.split("WebKit/")[1])||void 0,isChrome=parseFloat(ua.split(" Chrome/")[1])||void 0,isAIR=ua.indexOf("AdobeAIR")>=0,isIPad=ua.indexOf("iPad")>=0,isTouchPad=ua.indexOf("TouchPad")>=0,isChromeOS=ua.indexOf(" CrOS ")>=0,ts=0,pressedKeys=null;return{hook:hook,keyCodeToString:function(e){var t=Keys[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t},keydown:function(e){null==pressedKeys&&(pressedKeys=[]),pressedKeys[e]=!0},clear:function(){pressedKeys=null},process:function(e,t){var a=this.getModifierHash(e);if(!isMac&&pressedKeys){if((pressedKeys[91]||pressedKeys[92])&&(a|=8),pressedKeys.altGr){if(3==(3&a))return;pressedKeys.altGr=0}if(18===t||17===t){var s="location"in e?e.location:e.keyLocation;if(17===t&&1===s)ts=e.timeStamp;else if(18===t&&3===a&&2===s){var i=-ts;ts=e.timeStamp,i+=ts,3>i&&(pressedKeys.altGr=!0)}}}if(t in Keys.MODIFIER_KEYS){switch(Keys.MODIFIER_KEYS[t]){case"Alt":a=2;break;case"Shift":a=4;break;case"Ctrl":a=1;break;default:a=8}t=-1}if(8&a&&(91===t||93===t)&&(t=-1),!a&&13===t){var s="location"in e?e.location:e.keyLocation;if(3===s)return this.callback(e,a,-t)}return isChromeOS&&8&a?this.callback(e,a,t):a||t in Keys.FUNCTION_KEYS||t in Keys.PRINTABLE_KEYS?this.callback(e,a,t):!1},callback:function(e,hashId,keyCode){if(-1==keyCode)return!1;var key=Keys.KEY_MODS[hashId]+this.keyCodeToString(keyCode),action=this.__actions[key];
if(action){if("command"==action.type)return base.command.execute(action.name),!0;if("menu"==action.type)return base.menu.click(action.name),!0;if("calljs"==action.type)try{return eval(action.name+"()"),!0}catch(e){return!1}}return!1},getModifierHash:!isMac||!isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)},__actions:[],registerAction:function(e,t){"Ctrl-C"!=e&&"Ctrl-V"!=e&&"Ctrl-X"!=e&&(this.__actions[e]=t)},unregisterAction:function(e){delete this.__actions[e]}}}(),base.command=function(){return{init:function(e){this.__commands=[];for(var t=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),a="mac"==t,s=0,i=null;i=e[s++];){var n="Y"==i.status;this.__commands[i.name]={title:i.title,name:i.name,active:n,enabled:n},base.key.registerAction(a?i.shortcut_key_mac:i.shortcut_key,{type:"command",name:i.name}),n||this.disable(i.name)}this.__commands.cut={title:"Cut",name:"cut",active:!0,enabled:!0},this.__commands.copy={title:"Copy",name:"copy",active:!0,enabled:!0},this.__commands.paste={title:"Paste",name:"paste",active:!0,enabled:!0},this.__commands.refresh={title:"Refresh",name:"refresh",active:!0,enabled:!0},this.__commands.print={title:"Print",name:"print",active:!0,enabled:!0}},reload:function(){this.init(base.thisEl)},execute:function(action){if("undefined"==typeof this.__commands[action])return void console.warn("Unimplemented command ("+action+").");if(this.__commands[action].enabled){if("undefined"!=typeof base[action])return eval("base."+action+"()");var title=this.__commands[action].title;switch(action){case"newFromTemplate":base.tab.openSystem({url:"template",title:title});break;case"newFolder":base.openPopup({url:"editor/newfolder",title:title});break;case"openFile":base.openPopup({url:"editor/fileOpen",title:title});break;case"uploadFiles":base.tab.openSystem({url:"file/upload",title:title});break;case"saveAs":base.openPopup({url:"editor/saveas",title:title});break;case"findInFiles":base.openPopup({url:"editor/search?tab=findinfiles",title:title,modaless:!0});break;case"goToFile":base.openPopup({url:"editor/gotofile",title:title});break;case"goToLine":base.openPopup({url:"editor/gotoline",title:title});break;case"showShortcutKeys":base.tab.openSystem({url:"command",title:title});break;case"showChangeLog":base.openPopup({url:"editor/changelog",title:title});break;case"previewCurrentWorkspace":base.workspace.preview();break;case"previewActiveTab":base.file.previewActiveTab();break;case"compress":base.file.compressAllSelected();break;case"compressAs":base.file.openCompressAsDialog();break;case"extract":base.file.extractSelected();break;case"extractInto":base.file.openExtractIntoDialog();break;case"openTerminal":if(!base.workspace.isSandboxAvailable())return void $.notify("Terminal is not available for current active workspace.","error");base.layout.togglePane("terminal")}}},disable:function(e){this.__commands[e].enabled=!1,$("[data-action='"+e+"']").addClass("disabled"),$("ul.sitenavigation a[data-action='"+e+"']").parent().addClass("disable")},enable:function(e){return this.__commands[e].active?(this.__commands[e].enabled=!0,$("[data-action='"+e+"']").removeClass("disabled"),void $("ul.sitenavigation a[data-action='"+e+"']").parent().removeClass("disable")):!1}}}(),base.menu=function(){var e=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),t="mac"==e;return $("ul.sitenavigation a[data-action]").each(function(){var e=$(this);if("command"!=e.data("action-type")){var a=e.find("span.label_key.shortcut-key-"+(t?"mac":"win")).html();a&&a.length>0&&base.key.registerAction(a,{type:"menu",name:e.data("action")})}}),{click:function(e){var t=$("ul.sitenavigation a[data-action='"+e+"']");this.isActive(t)&&t.click()},isActive:function(e){return!e.parent().hasClass("disable")},enable:function(e){$("ul.sitenavigation a[data-action='"+e+"']").removeClass("disable")},disable:function(e){$("ul.sitenavigation a[data-action='"+e+"']").addClass("disable")}}}(),base.file=function(){var COMMAND_CUT="cut",COMMAND_COPY="copy",COMMAND_DUPLICATE="duplicate";return{init:function(){$(base.options.configTree.treeRootElement).on("dblclick","li.subdir > div.icon.dir",function(){base.file.toggleDir($(this).parent())}),$(base.options.configTree.treeRootElement).on("dblclick","li > div.icon.file",function(){var e=$(this).parent();base.file.open({id:e.data("id"),name:e.find(">div.file > span").html(),url:e.data("url")})}),$(base.options.configTree.treeRootElement).on("mousedown","li > div.icon",function(e){base.file.preselect($(this).parent(),e),3!=e.which&&(base.file.captureMouse(),$(window).bind("mousemove",base.file.move).bind("mouseover",base.file.checkDroppable).bind("mouseout",base.file.checkDroppable).bind("mouseup",base.file.releaseMouse).bind("focus",base.file.releaseMouse).bind("blur",base.file.releaseMouse),base.key.registerAction("Esc",{type:"calljs",name:"base.file.releaseMouse"}))}),$(base.options.configTree.treeRootElement).on("click","li > div.icon",base.file.click),$(base.options.configTree.treeRootElement).on("click","li.subdir > div.subdirarrow",function(){base.file.toggleDir($(this).parent())}),$("ul.itemtoolbaroptions > li.expandall",'[data-manager-id="files_manager_container"]').on("click",function(){base.file.expandAll()}),$("ul.itemtoolbaroptions > li.collapseall",'[data-manager-id="files_manager_container"]').on("click",function(){base.file.collapseAll()}),$("ul.itemtoolbaroptions > li.refresh",'[data-manager-id="files_manager_container"]').on("click",function(){base.file.refresh()}),$("ul.itemtoolbaroptions > li.project-change ul.project-list",'[data-manager-id="files_manager_container"]').on("click",">li.project",function(){base.file.changeProject($(this).data("project-id")),setTimeout(function(){$("ul.itemtoolbaroptions > li.project-change ul.project-list",'[data-manager-id="files_manager_container"]').hide()})}),$("ul.itemtoolbaroptions > li.tool-list ul.toolbaroptionitemlist",'[data-manager-id="files_manager_container"]').on("click",">li",function(){var e=$(this);e.hasClass("refresh")&&base.file.refresh(),setTimeout(function(){$("ul.itemtoolbaroptions > li.tool-list ul.toolbaroptionitemlist",'[data-manager-id="files_manager_container"]').hide()})}),this.reload(),this.reloadProjects()},__mouseCaptured:!1,captureMouse:function(){this.__mouseCaptured=!0},releaseMouse:function(e){base.thisEl=e,setTimeout(function(){$(window).unbind("mousemove",base.file.move).unbind("mouseover",base.file.checkDroppable).unbind("mouseout",base.file.checkDroppable).unbind("mouseup",base.file.releaseMouse).unbind("focus",base.file.releaseMouse).unbind("blur",base.file.releaseMouse),base.key.unregisterAction("Esc"),base.file.stopDragging(),base.file.__readyForDragging=0,base.file.__mouseCaptured=!1})},isMouseCaptured:function(){return this.__mouseCaptured},click:function(e){base.file.isDraggingStarted()||base.file.select($(this).parent(),e)},__preselectedNodeUrl:null,preselect:function(e,t){if(e&&!(e.length<=0))if(e.hasClass("selected")||(base.file.__preselectedNodeUrl=e.data("url"),t&&(t.ctrlKey||t.shiftKey)||$("li.selected",base.options.configTree.treeRootElement).removeClass("selected selected-last")),t&&t.shiftKey){var a=$("li",base.options.configTree.treeRootElement),s=a.index($("li.selected-last",base.options.configTree.treeRootElement)),i=a.index(e);if(s>i){var n=s;s=i,i=n}for(var o=0;o<a.length;o++)o>=s&&i>=o?$(a.get(o)).addClass("selected"):$(a.get(o)).removeClass("selected")}else $("li.selected-last",base.options.configTree.treeRootElement).removeClass("selected-last"),e.addClass("selected selected-last")},select:function(e,t){!e||e.length<=0||(t&&t.ctrlKey&&3!=t.which?e.data("url")!=base.file.__preselectedNodeUrl&&e.removeClass("selected"):t&&t.shiftKey&&3!=t.which||t&&3==t.which&&e.hasClass("selected")||($("li.selected, li.selected-last",base.options.configTree.treeRootElement).removeClass("selected selected-last"),e.addClass("selected selected-last")),base.file.__preselectedNodeUrl=null,base.file.isSelected()&&!base.file.isRootSelected()?base.file.isZipSelected()?(base.command.disable("compress"),base.command.disable("compressAs"),base.command.enable("extract"),base.command.enable("extractInto")):(base.command.enable("compress"),base.command.enable("compressAs"),base.command.disable("extract"),base.command.disable("extractInto")):(base.command.disable("compress"),base.command.disable("compressAs"),base.command.disable("extract"),base.command.disable("extractInto")))},deselect:function(){$("li.selected, li.selected-last",base.options.configTree.treeRootElement).removeClass("selected selected-last")},getByURL:function(e){return $("li[data-url='"+e+"']",base.options.configTree.treeRootElement)},removeByURL:function(e){var t=this.getByURL(e);t.length>0&&t.remove(),base.tab.closeByURL(e)},updateByURL:function(e,t){var a=this.getByURL(e);a.length>0&&a.replaceWith(this.createFileNode(t)),base.tab.updateFileByURL(e,t)},move:function(e){if(base.file.isMouseCaptured()&&!base.file.isDraggingStarted()){if(base.file.__readyForDragging<5)return void base.file.__readyForDragging++;base.file.startDragging(e),base.file.checkDroppable(e),base.file.__readyForDragging=0}return base.file.drag(e),e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,!1},checkDroppable:function(e){if(e&&e.target){var t="mouseout"==e.type,a=$(e.target),s=a[0].tagName.toLowerCase();if("ul"!=s)if($(".drop-target").removeClass("drop-target"),a.closest(base.options.configTree.treeRootElement).length>0){if("li"!=s&&(a=a.closest("li")),a.hasClass("selected"))return;a.addClass("drop-target"),t?$("body").removeClass("droppable not-droppable"):a.hasClass("subdir")&&base.file.isDroppable(a)?$("body").removeClass("not-droppable").addClass("droppable"):$("body").removeClass("droppable").addClass("not-droppable")}else("mainContent"==a[0].id||a.closest("#mainContent").length>0)&&("mainContent"!=a[0].id&&(a=a.closest("#mainContent")),t?($("body").removeClass("droppable not-droppable droppable-on-editor"),a.removeClass("drop-target")):(base.file.getAllSelected().find(">div.icon.file").length>0?$("body").removeClass("not-droppable").addClass("droppable droppable-on-editor"):$("body").removeClass("droppable").addClass("not-droppable"),a.addClass("drop-target")))}},__dragging:!1,__readyForDragging:0,__draggingObject:null,isDraggingStarted:function(){return this.__dragging},startDragging:function(){var e=$("#file-drag-drop");e.length<=0&&(e=$("<div id='file-drag-drop' class='drag-drop-container'>").appendTo("body"));var t=$("<ul class='filenavlist.filelvl1'>");this.getAllSelected().each(function(){$("<li>").append($(this).find(">div.icon").clone()).appendTo(t).data("clone-url",$(this).data("url"))}),t.appendTo(e),e.show(),this.__draggingObject=e,this.__dragging=!0,$("body").addClass("dragging")},stopDragging:function(){this.__draggingObject&&($("body").hasClass("dragging droppable")&&($("body").hasClass("droppable-on-editor")?this.getAllSelected().find(">div.icon.file").dblclick():this.drop()),this.__draggingObject.empty().hide()),this.__draggingObject=null,this.__dragging=!1,$("body").removeClass("dragging droppable not-droppable droppable-on-editor"),$(".drop-target").removeClass("drop-target")},drag:function(e){var t=e.pageX-$(window).scrollLeft()+10,a=e.pageY-$(window).scrollTop()+3;this.__draggingObject.css({top:a+"px",left:t+"px"})},isDroppable:function(e){if(null==base.file.__draggingObject)return!1;for(var t=!0,a=e.data("url"),s=base.file.__draggingObject.find("li"),i=0,n=null;n=s.get(i++);){var o=$(n).data("clone-url");if(a.indexOf(o)>-1){t=!1;break}}return t},drop:function(){var e=$(".drop-target").data("url"),t=base.thisEl&&base.thisEl.ctrlKey;base.thisEl={dir:e},t?this.copyTo():this.moveTo()},fetchFileName:function(e){return $(base.options.configAce.tabListUl+">li#panel_nav_"+e).find("a.ui-tabs-anchor").html().replace(/<span.*?>.*?<\/span>/m,"").trim()},isChanged:function(e){return $(base.options.configAce.tabListUl+">li#panel_nav_"+e).find("a.ui-tabs-anchor span").length>0},getTree:function(){return $("ul:first",base.options.configTree.treeRootElement)},toggleDir:function(e){return e.hasClass("active")||e.hasClass("loaded")?(e.toggleClass("active"),void this.saveState(e)):void this.dir(e)},saveState:function(e){$.post("file/saveState",{url:e.data("url"),state:e.hasClass("active")?"expand":"collapse"})},reload:function(){var e=$(base.options.configTree.treeRootElement);if(e.is(":visible")&&(!e.hasClass("loaded")||e.hasClass("workspace-changed")))return base.workspace.getActiveDirectory()?void $.ajax({type:"POST",url:"file/getState",dataType:"json",data:{url:base.workspace.getActiveDirectory()}}).done(function(e){base.file.restore(e&&e.restore),$(base.options.configTree.treeRootElement).addClass("loaded").removeClass("workspace-changed")}).error(function(){base.file.restore(!1)}):($.notify("No active workspace.","info"),void base.file.restore(!1))},changed:function(){var e=$(base.options.configTree.treeRootElement);e.hasClass("loaded")&&e.addClass("workspace-changed"),this.reload()},projectChanged:function(){var e=$("ul.itemtoolbaroptions li.project-change ul.project-list",'[data-manager-id="files_manager_container"]');e.hasClass("loaded")&&e.addClass("changed"),this.reloadProjects()},reloadProjects:function(){var e=$("ul.itemtoolbaroptions li.project-change ul.project-list",'[data-manager-id="files_manager_container"]');!$(base.options.configTree.treeRootElement).is(":visible")||e.hasClass("loaded")&&!e.hasClass("changed")||$.ajax({type:"POST",url:"workspace/",dataType:"json"}).done(function(e){if(null!=e&&"string"!=typeof e){if(e.status){var t=$("ul.itemtoolbaroptions li.project-change ul.project-list",'[data-manager-id="files_manager_container"]');t.find(">li.project").remove();var a=e.workspaces;if(base.workspace.__list=a,a)for(var s in a){var i=a[s],n=$("<li class='project'>").appendTo(t);n.attr("data-project-id",i.ws_directory),n.data("workspace",i),i.ws_active&&n.append("<i class='fa fa-check'></i>"),$("<span>").html(i.ws_name).appendTo(n)}}base.showMessages(e.messages)}})},changeProject:function(e){base.request({type:"POST",url:"workspace/activate",dataType:"json",data:{name:e},callback:function(e){var t=$("ul.itemtoolbaroptions li.project-change ul.project-list",'[data-manager-id="files_manager_container"]');t.find(">li.project > i").remove();var a=$(">li.project[data-project-id='"+e.ws.ws_directory+"']",t).prepend("<i class='fa fa-check'></i>");base.workspace.changed(!0),base.workspace.setActive(a.data("workspace"))}})},restore:function(e){if($(base.options.configTree.treeRootElement).empty(),base.workspace.getActive()){var t=this.createFileNode({name:base.workspace.getActiveName(),url:base.workspace.getActiveDirectory(),type:"dir",restore:e}).appendTo(this.createDirContentNode(0).appendTo(base.options.configTree.treeRootElement)).data("is-workspace-root",!0);e&&this.dir(t)}},expandAll:function(e){e||(e=$(">ul.filenavlist",base.options.configTree.treeRootElement)),e.find(">li.subdir").each(function(){var e=$(this);e.hasClass("active")||(e.hasClass("loaded")?(e.addClass("active"),base.file.saveState(e),base.file.expandAll(e.find(">ul.filenavlist"))):(e.addClass("expanding"),e.hasClass("loading")||base.file.dir(e)))})},collapseAll:function(){$("li",base.options.configTree.treeRootElement).removeClass("active"),$(">ul.filenavlist.filelvl1 > li",base.options.configTree.treeRootElement).each(function(){base.file.saveState($(this))})},refresh:function(){$("li.selected.subdir",base.options.configTree.treeRootElement).each(function(){var e=$(this);e.hasClass("loaded")&&e.removeClass("loaded"),e.hasClass("active")&&(e.addClass("restoring"),base.file.dir(e))})},getDir:function(e){return"/"==e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),e.substr(0,e.lastIndexOf("/")+1)},__onChange:function(e){$(base.options.configTree.treeRootElement).is(":visible")&&this.reloadDir(this.getDir(e))},reloadDir:function(e,t){var a=$("li[data-url='"+e+"']",base.options.configTree.treeRootElement);a.length<=0||(a.hasClass("loaded")&&a.removeClass("loaded"),(t||a.hasClass("active"))&&this.dir(a))},startLoading:function(e){e.removeClass("loaded").addClass("loading"),e.find(">.subdirarrow").append("<span class='loader'><i class='fa fa-spin fa-spinner'></i></span>")},stopLoading:function(e){e.find(">.subdirarrow").find(".loader").remove(),e.removeClass("loading").addClass("loaded")},dir:function(e){base.file.clearCommand(),this.startLoading(e),$.ajax({type:"POST",url:"file/dir",dataType:"json",data:{dir:e.data("url"),restore:e.hasClass("restoring")?1:0}}).done(function(e){base.file.dirCallback(e)}).error(function(){base.file.dirCallback()})},dirCallback:function(e){var t=null;if(e&&(t=$("[data-url='"+e.dir+"']",base.options.configTree.treeRootElement)),!e||!e.status)return $.notify("Unknown error.","error"),void(t&&t.length>0&&base.file.stopLoading(t));var a=t.find(">ul.filenavlist");if(a.length>0?a.empty():a=this.createDirContentNode(t.parents(".filenavlist").length),e.files.length>0)for(var s=0,i=null;i=e.files[s++];)this.createFileNode(i).appendTo(a);a.appendTo(t),this.stopLoading(t),t.hasClass("active")||(t.addClass("active"),this.saveState(t)),t.hasClass("expanding")?(t.removeClass("expanding restoring"),this.expandAll(a)):t.hasClass("restoring")&&(a.find(">li.subdir.restoring").each(function(){base.file.dir($(this))}),t.removeClass("restoring"))},createDirContentNode:function(e){var t=$('<ul class="filenavlist">');return t.addClass("filelvl"+(e+1)),t},createFileNode:function(e){var t=$("<li data-url='"+e.url+"'>");return"dir"==e.type?(t.addClass("subdir"),$('<div class="subdirarrow">').appendTo(t)):t.data("id",e.id),$('<div class="icon '+e.type+" "+this.getExtension(e.name)+'"><span>'+e.name+"</span></div>").appendTo(t),e.restore&&t.addClass("restoring"),t},getAllSelected:function(){return $("li.selected",base.options.configTree.treeRootElement)},getSelected:function(){return $("li.selected.selected-last",base.options.configTree.treeRootElement)},isSelected:function(){return this.getAllSelected().length>0},isDirSelected:function(){return this.getSelected().find(">div.icon").hasClass("dir")},isRootSelected:function(){var e=this.getAllSelected(),t=e.length;if(t>0)for(var a,s=0;a=e[s++];)if($(a).data("is-workspace-root"))return!0;return!1},isZipSelected:function(){if(this.isSelected()&&!this.isRootSelected()){var e=base.file.getExtension(this.getSelected().data("url"));if("zip"==e||"tar"==e||"tar.gz"==e)return!0}return!1},getSelectedURL:function(e){return"dir"!=e||this.isSelected()?this.getSelected().data("url"):base.workspace.getActiveDirectory()},getSelectedDir:function(){return this.isSelected()?this.isDirSelected()?this.getSelected().data("url"):this.getSelected().closest("li.subdir").data("url"):base.workspace.getActiveDirectory()},getAllSelectedURLs:function(){var e=[];return this.getAllSelected().each(function(){e[e.length]=$(this).data("url")}),e},dir2json:function(){e=base.thisEl,$.post("file/dir2json",e,function(e){if($("#config").length>0){var t=$("#config").get(0),a=t.contentWindow||t.contentDocument;a.updateLocalServer(e)}else{var t=$("#popupcontent"+base.popupId).get(0),a=t.contentWindow||t.contentDocument;a.updateLocalServer(e)}})},__newCount:0,_new:function(){base.tab.openFile({id:base.generateUniqueId(),url:"",name:"new"+(this.__newCount>0?" "+this.__newCount:"")}),this.__newCount++},_newFromContext:function(e,t){var a="new."+t;$('<iframe src="'+base.options.baseUrl+"file/getFromContext?context="+unescape(e)+'" style="display: none;" />').appendTo("body").on("load",function(e){var t=$(this).contents().find("html:first").find("body:first").html();$(this).remove(),base.tab.openFile({id:base.generateUniqueId(),url:"",name:a,content:t}),base.tab.markChanged()})},_newDir:function(dir){var fileURL=base.workspace.getActiveDirectory();"undefined"!=typeof dir&&""!=dir?fileURL=dir:this.isDirSelected()&&(fileURL=this.getSelectedURL());var fileName="untitled";"undefined"!=typeof base.thisEl&&"undefined"!=typeof base.thisEl.fileName&&(fileName=base.thisEl.fileName);var e={dir:fileURL,name:fileName,type:"dir"};$.post("file/create",e,function(data){var json=eval("("+data+")");base.file.addFileNodeInDir(json)})},_delete:function(){var e=this.getAllSelectedURLs();e.length<=0||$.ajax({type:"POST",url:"file/delete",dataType:"json",data:{urls:e}}).done(function(e){base.file.getAllSelected().each(function(){base.tab.closeByURL($(this).data("url"))}).remove()}).error(function(){})},openFromLocal:function(){var e=base.thisEl;base.tab.openFile({id:e.id,url:e.path,name:e.name})},__srcURLs:null,__command:null,clearCommand:function(){this.clearClipboard(),this.__command=null},isClipboardEmpty:function(){return null==this.__srcURLs},fillClipboard:function(){this.__srcURLs=this.getAllSelectedURLs()},clearClipboard:function(){this.__srcURLs=null},cut:function(){this.fillClipboard(),this.__command=COMMAND_CUT},copy:function(){this.fillClipboard(),this.__command=COMMAND_COPY},paste:function(){if(!(null==this.__srcURLs||this.__srcURLs.length<=0)){for(var e=[],t=0,a=null;a=this.__srcURLs[t++];){var s=a,i=s,n="file";"/"==s.substr(s.length-1)&&(i=s.substr(0,s.length-1),n="dir");var o=i.lastIndexOf("/")+1,r=i.substr(0,o),l=i.substr(o),c=base.file.__command,d=this.getSelectedURL("dir");if(c==COMMAND_DUPLICATE&&(d=r),(c==COMMAND_CUT||c==COMMAND_COPY)&&d.indexOf(s)>-1)return void $.notify("You cannot paste a directory in the inner directory.","error");if(c==COMMAND_CUT&&r==d)return void $.notify("You cannot cut and paste a file in the same directory.","error");e[e.length]={name:l,dir:r,type:n}}var p={files:e,target_dir:d,command:c};c==COMMAND_CUT?base.process.start("Please wait while moving file(s)..."):base.process.start("Please wait while copying file(s)..."),$.ajax({type:"POST",url:"file/copy",dataType:"json",data:p}).done(function(e){if(e.status){if(e.files){if(base.file.addFileNodesInDir(e.files,e.dir),base.file.__command==COMMAND_CUT)for(var t=0,a=null;a=base.file.__srcURLs[t];)$("li[data-url='"+a+"']",base.options.configTree.treeRootElement).remove(),base.tab.updateFileByURL(a,e.files[t]),t++;c==COMMAND_CUT?$.notify(base.__tweakForPlural(e.files.length,"file")+" moved successfully.","success"):$.notify(base.__tweakForPlural(e.files.length,"file")+" copied successfully.","success")}base.file.__command!=COMMAND_COPY&&base.file.clearCommand()}base.process.stop(e.messages)}).error(function(e){c==COMMAND_CUT?$.notify("Unknown error occurred while moving file(s).","error"):$.notify("Unknown error occurred while copying file(s).","error"),base.process.stop()})}},duplicate:function(){this.fillClipboard(),this.__command=COMMAND_DUPLICATE,this.paste(),this.__command=null},addFileNodeInDir:function(e){var t=$("li[data-url='"+e.dir+"']",base.options.configTree.treeRootElement);if(!(t.length<=0)){var a=t.find(">ul.filenavlist");a.length<=0&&(a=base.file.createDirContentNode(t.parents(".filenavlist").length).appendTo(t));var s=a.find(">li[data-url='"+e.url+"']");s.length<=0&&(s=base.file.createFileNode(e).appendTo(a)),base.file.select(s),t.addClass("active")}},addFileNodesInDir:function(e,t){var a=$("li[data-url='"+t+"']",base.options.configTree.treeRootElement);if(!(a.length<=0)){var s=a.find(">ul.filenavlist");s.length<=0&&(s=base.file.createDirContentNode(a.parents(".filenavlist").length).appendTo(a)),base.file.deselect();for(var i=null,n=0,o=null;o=e[n++];)i=s.find(">li[data-url='"+o.url+"']"),i.length<=0&&(i=base.file.createFileNode(o).appendTo(s)),i.addClass("selected");i&&i.addClass("selected-last"),a.addClass("active")}},openRenameDialog:function(){base.openPopup({url:"editor/rename",title:"Rename"})},rename1:function(){var e=this.getSelectedURL();this.isDirSelected()&&(e=e.substr(0,e.length-1));var t=e.lastIndexOf("/")+1,a=e.substr(0,t),s=e.substr(t),i=base.thisEl,n={dir:a,from:s,to:i,type:this.isDirSelected()?"dir":"file"};$.ajax({type:"POST",url:"file/rename",dataType:"json",data:n}).done(function(t){base.file.getSelected().replaceWith(base.file.createFileNode(t).addClass("selected selected-last")),base.tab.updateFileByURL(e,t),base.closePopup()})},openMoveToDialog:function(){base.openPopup({url:"editor/moveTo",title:"Move To"})},moveTo:function(){var e=base.file.getAllSelectedURLs();if(!(null==e||e.length<=0)){for(var t=[],a="cut",s=base.thisEl.dir,i=0,n=null;n=e[i++];){var o=n,r=o,l="file";"/"==o.substr(o.length-1)&&(r=o.substr(0,o.length-1),l="dir");var c=r.lastIndexOf("/")+1,d=r.substr(0,c),p=r.substr(c);if(s.indexOf(o)>-1)return void $.notify("You cannot paste a directory in the inner directory.","error");if(d==s)return void $.notify("You cannot move a file in the same directory.","error");t[t.length]={name:p,dir:d,type:l}}var f={files:t,target_dir:s,command:a};base.process.start("Please wait while moving file(s)..."),$.ajax({type:"POST",url:"file/copy",dataType:"json",data:f}).done(function(e){if(e.status){if(e.files){var t=0;base.file.getAllSelected().each(function(){base.tab.updateFileByURL($(this).data("url"),e.files[t++])}).remove(),base.file.addFileNodesInDir(e.files,e.dir),$.notify(base.__tweakForPlural(e.files.length,"file")+" moved successfully.","success")}base.closePopup()}base.process.stop(e.messages)}).error(function(){$.notify("Unknown error occurred while moving file(s).","error"),base.process.stop()})}},openCopyToDialog:function(){base.openPopup({url:"editor/copyTo",title:"Copy To"})},copyTo:function(){var e=base.file.getAllSelectedURLs();if(!(null==e||e.length<=0)){for(var t=[],a="copy",s=base.thisEl.dir,i=0,n=null;n=e[i++];){var o=n,r=o,l="file";"/"==o.substr(o.length-1)&&(r=o.substr(0,o.length-1),l="dir");var c=r.lastIndexOf("/")+1,d=r.substr(0,c),p=r.substr(c);if(s.indexOf(o)>-1)return void $.notify("You cannot paste a directory in the inner directory.","error");t[t.length]={name:p,dir:d,type:l}}var f={files:t,target_dir:s,command:a};base.process.start("Please wait while copying files..."),$.ajax({type:"POST",url:"file/copy",dataType:"json",data:f}).done(function(e){e.status&&(e.files&&(base.file.addFileNodesInDir(e.files,e.dir),$.notify(base.__tweakForPlural(e.files.length,"file")+" copied successfully.","success")),base.closePopup()),base.process.stop(e.messages)}).error(function(){$.notify("Unknown error occurred while copying file(s).","error"),base.process.stop()})}},openSearchDialog:function(e){base.openPopup({url:"editor/search?tab="+e,title:"Search Files",modaless:!0})},search:function(){var e=base.thisEl,t=e.mode,a=e.needle,s=e.options;if(s.range=null,0==t){var i=base.getEditorInstance(base.tab.getActiveId());if(!i)return void $.notify("No active documents.","warn");i=i.instance;var n=i.find(a,s);"undefined"==typeof n&&$.notify("No matches found.","info")}else if(1==t){if(editors.length<=0)return void $.notify("No documents opened.","warn");s.needle=a,this.searchEditors(editors,s)}else if(2==t){var o=base.tab.getActiveId(),i=base.getEditorInstance(o);if(!i)return void $.notify("No active documents.","warn");i=i.instance,s.needle=a,this.searchEditors([{id:o,instance:i}],s)}},searchEditors:function(e,t){t.wrap=!0,t.backwards=!1;for(var a=[],s=0,i=0,n=0,o=null;o=e[n++];){var r=o.id;o=o.instance,o.$search.set(t);var l=o.$search.findAll(o.getSession());l&&l.length>0&&(s+=l.length,i++,a[a.length]={ranges:l,fileId:r,editor:o})}if(s>0){base.file.showSearchResults(),$("#searchresults_footerpane > div.footerpanetopbar div.footerpanetopbartxt").html("Current Search Results: "+s+" hits"),$("#searchresults_footerpane > div.sresultsgroupswrapper > div.sresultsgroup.active").removeClass("active");var c=$('<div class="sresultsgroup active"></div>').prependTo("#searchresults_footerpane>.sresultsgroupswrapper").hide();$('<div class="sresultstitle">Searched for "'+t.needle+'" ('+s+" hits in "+i+" files)</div>").appendTo(c);for(var d=$('<ul class="sresultsitemlist"></ul>'),p=0,f=null;f=a[p++];){var o=f.editor,r=f.fileId,l=f.ranges,u=base.tab.getURL(r);u=u?decodeURIComponent(u):"";var b=this.fetchFileName(r),g={fileId:r,fileName:b,fileURL:u},h=l.length,m=$('<li class="sresultitem"><div class="rsresultsticker"><span></span></div></li>').appendTo(d);base.stringToBoolean(base.options.configAce.search_collapse)||m.addClass("active"),m.data("file",g);var v=$('<div class="rsresultsoutput"></div>').appendTo(m);$('<div class="sresultitempath">'+(""==u?b:base.workspace.getNamedURL(u))+" ("+h+" hits)</div>").appendTo(v);for(var n=0,_=null;_=l[n++];){var y=_.start.row+1,w=o.session.getLine(_.start.row),k=w.substr(_.start.column,_.end.column-_.start.column),C=$('<div class="sresultitemdata"><span class="srlnnum">Line '+y+":</span> </div>").appendTo(v);C.data("range",_),$("<span>").text(w.substr(0,_.start.column)).appendTo(C),$('<span class="srmatch">').text(k).appendTo(C),_.end.column<w.length&&$("<span>").text(w.substr(_.end.column)).appendTo(C)}}d.appendTo(c),c.show(),$.notify(s+" match(es) found.","success"),base.closePopup()}else $.notify("No matches found.","info")},showSearch:function(){var e=base.thisEl,t=e.closest("li").data("file"),a=$("a[href='#panel_"+t.fileId+"']");if(a.length>0){a.closest("li").hasClass("ui-tabs-active")||a.click();var s=base.getEditorInstance(t.fileId);s&&(s=s.instance,s.selection.setRange(e.data("range")))}else t.fileURL&&(base.tab.openFile({id:t.fileId,url:t.fileURL,name:t.fileName}),$.notify("Please double click the search result again to move to the searched line.","info"))},replace:function(){var e=base.thisEl,t=e.mode,a=e.needle,s=e.replace,i=e.options;if(0==t)return this.search();if(1==t){var n=base.getEditorInstance(base.tab.getActiveId());if(!n)return void $.notify("No active documents.","warn");n=n.instance,i.needle=a;var o=n.selection.getRange();if(o){n.$search.set(i);var r=n.$search.findAll(n.getSession());if(r&&r.length>0)for(var l=0,c=null;c=r[l++];)o.start.row==c.start.row&&o.start.column==c.start.column&&o.end.row==c.end.row&&o.end.column==c.end.column&&n.replace(s,i)}var o=n.find(a,i);"undefined"==typeof o&&$.notify("No matches found.","info")}else if(2==t){var n=base.getEditorInstance(base.tab.getActiveId());if(!n)return void $.notify("No active documents.","warn");n=n.instance,i.needle=a,i.replaceInSelection&&(i.range=n.selection.getRange(),console.log(i.range)),n.$search.set(i);var d=n.replaceAll(s,i);d>0?$.notify(d+" match(es) replaced.","success"):$.notify("No matches found.","info")}else if(3==t){if(i.needle=a,editors.length<=0)return void $.notify("No documents opened.","warn");for(var d=0,l=0,n=null;n=editors[l++];)d+=n.instance.replaceAll(s,i);d>0?$.notify(d+" match(es) replaced.","success"):$.notify("No matches found.","info")}},searchInFiles:function(){var e=base.thisEl;base.closePopup(),base.process.start("Finding in files..."),$.ajax({type:"POST",url:"file/search",dataType:"json",data:e}).done(function(t){var a=t.searches;if(null==a||a.length<=0)return $.notify("No matches found.","info"),void base.process.stop();for(var s=0,i=0,n=null;n=a[i++];)s+=n.ranges.length;var o=a.length;base.file.showSearchResults(),$("#searchresults_footerpane > div.footerpanetopbar div.footerpanetopbartxt").html("Current Search Results: "+s+" hits"),$("#searchresults_footerpane > div.sresultsgroupswrapper > div.sresultsgroup.active").removeClass("active");var r=$('<div class="sresultsgroup active"></div>').prependTo("#searchresults_footerpane>.sresultsgroupswrapper").hide();$('<div class="sresultstitle">Searched for "'+e.needle+'" ('+s+" hits in "+o+" files)</div>").appendTo(r);for(var l=$('<ul class="sresultsitemlist"></ul>'),c=0,n=null;n=a[c++];){var d=n.fileId,p=n.ranges,f=n.fileURL,u=n.fileName,b={fileId:d,fileName:u,fileURL:f},g=p.length,h=$('<li class="sresultitem"><div class="rsresultsticker"><span></span></div></li>').appendTo(l);base.stringToBoolean(base.options.configAce.search_collapse)||h.addClass("active"),h.data("file",b);var m=$('<div class="rsresultsoutput"></div>').appendTo(h);$('<div class="sresultitempath">'+(""==f?u:base.workspace.getNamedURL(f))+" ("+g+" hits)</div>").appendTo(m);
for(var i=0,v=null;v=p[i++];){var _=v.start.row+1,y=v.line,w=y.substr(v.start.column,v.end.column-v.start.column),k=$('<div class="sresultitemdata"><span class="srlnnum">Line '+_+":</span> </div>").appendTo(m);k.data("range",v),$("<span>").text(y.substr(0,v.start.column)).appendTo(k),$('<span class="srmatch">').text(w).appendTo(k),v.end.column<y.length&&$("<span>").text(y.substr(v.end.column)).appendTo(k)}}l.appendTo(r),r.show(),$.notify(s+" match(es) found.","success"),base.process.stop()}).error(function(){$.notify("Unknown errors.","error"),base.process.stop()})},replaceInFiles:function(){var e=base.thisEl;base.closePopup(),base.process.start("Replacing in files..."),$.ajax({type:"POST",url:"file/replace",dataType:"json",data:e}).done(function(e){return null==e||e.replacedCount<=0?($.notify("No matches found.","info"),void base.process.stop()):($.notify(e.replacedCount+" match(es) replaced.","success"),void base.process.stop())}).error(function(){$.notify("Unknown errors.","error"),base.process.stop()})},showSearchResults:function(){base.layout.openPane("searchresults")},open:function(e){"undefined"==typeof e&&(e=base.thisEl),base.tab.openFile(e)},getExtension:function(e){try{var t=e.substring(e.lastIndexOf("/")+1),a=/(?:\.([^.]+))?$/;return $.trim(a.exec(t)[1])}catch(e){return""}},isValidFileType:function(e){return""!=base.getModeExtension(this.getExtension(e))||base.isImage(e)===!0},save:function(e){var t=base.tab.getData(e),a=t.url;if(t.isNew)return base.tab.activate(e),$('[data-action="saveAs"]').click(),!1;var s=base.getEditorInstance(e).instance.getSession().getValue();return $.ajax({type:"POST",url:"file/save",dataType:"json",data:{url:unescape(a),content:s}}).done(function(t){t.status&&base.file.__saved(e),base.showMessages(t.messages)}),t.isRemote&&base.ftp.saveRemoteFile(e,s,t.remoteInfo.connection),!0},__saved:function(e){return base.file.isClosingAll()?(base.tab.close(base.tab.getActiveId()),base.file.continueClosing()):base.file.isClosing()?(base.tab.close(base.tab.getActiveId()),base.file.finishClosing()):(base.tab.markUnchanged(e),base.command.disable("saveFile"),void(base.file.isSavingAll()&&base.file.continueSaving()))},saveAs:function(){var e=base.thisEl,t=base.getEditorInstance(base.tab.getActiveId()).instance.getSession().getValue();e.content=t,$.ajax({type:"POST",url:"file/saveAs",dataType:"json",data:e}).done(function(e){if(e.status){if(base.closePopup(),base.file.addFileNodeInDir(e),base.file.isClosingAll())return base.tab.close(base.tab.getActiveId()),base.file.continueClosing();if(base.file.isClosing())return base.tab.close(base.tab.getActiveId()),base.file.finishClosing();var t=base.tab.getActiveId();base.tab.markUnchanged(t),base.tab.updateFileById(t,e);var a=base.getModeExtension(base.getExtension(e.name));editor=base.getEditorInstance(e.id).instance,base.stringToBoolean(base.options.configAce.autoSetMode)&&""!=a?editor.getSession().setMode("ace/mode/"+a):editor.getSession().setMode("ace/mode/"+base.options.configAce.setMode),base.file.isSavingAll()&&base.file.continueSaving()}base.showMessages(e.messages)})},__savingAll:!1,__activeTab:null,isSavingAll:function(){return this.__savingAll},saveAll:function(){this.__savingAll=!0,this.__activeTab=base.tab.getActiveId(),this.continueSaving()},continueSaving:function(){var e=$(base.options.configAce.tabListUl+" li a.ui-tabs-anchor span");e.length>0?this.save(e.closest("li").data("tab-id")):this.finishSavingAll()},finishSavingAll:function(){this.__savingAll=!1,base.tab.activate(this.__activeTab),this.__activeTab=null},download:function(){var e=base.thisEl,t=$("form#downloadForm");null==t[0]&&(t=$("<form style='display: none' id='downloadForm' method='post' action='file/download'><input type='text' name='name' /><input type='text' name='dir' /></form>").appendTo("body")),$("[name='name']",t).val(e.name),$("[name='dir']",t).val(e.dir),t.submit()},saveToLocal:function(){var e=base.thisEl;e.content=base.getEditorInstance(base.tab.getActiveId()).instance.getSession().getValue();var t=$("form#saveToLocalForm");null==t[0]&&(t=$("<form style='display: none' id='saveToLocalForm' method='post' action='file/saveToLocal'><input type='text' name='name' /><textarea name='content'></textarea></form>").appendTo($("body",$(document))[0])),$("[name='name']",t).val(e.name),$("[name='content']",t).text(e.content),t.submit()},rename:function(){var e=base.thisEl;$.ajax({type:"POST",url:"file/rename",dataType:"json",data:e}).done(function(t){base.file.updateByURL(e.dir+e.from+("dir"==e.type?"/":""),t),e.type=null,base.file.dir2json()})},deleteFiles:function(){var e=base.thisEl;$.post("file/deleteFiles/",e,function(t){base.thisEl={dir:e[1].dir},base.file.dir2json();for(var a in e){var s=e[a];base.file.removeByURL(s.dir+s.fileUrl+("dir"==s.type?"/":""))}})},createNew:function(){var e=base.thisEl;$.ajax({type:"POST",url:"file/saveAs",dataType:"json",data:e}).done(function(t){e.type="",base.file.dir2json(),base.file.reloadDir(e.dir),base.showMessages(t.messages)})},__closing:!1,isClosing:function(){return this.__closing},close:function(e){this.isChanged(e)?(base.tab.activate(e),$.alert.open({type:"confirm",content:'Do you want to save "'+this.fetchFileName(e)+'"?',buttons:{yes:"Yes",no:"No",cancel:"Cancel"},callback:function(t){"yes"==t?(base.file.__closing=!0,base.file.save(e)):"no"==t?(base.tab.close(e),base.file.isClosingAll()&&base.file.continueClosing()):base.file.isClosingAll()&&base.file.finishClosingAll()}})):(base.tab.close(e),this.isClosingAll()&&this.continueClosing())},finishClosing:function(){this.__closing=!1},__closingAll:!1,__closingDirection:null,__current:null,isClosingAll:function(){return this.__closingAll},closeAll:function(){this.__closingAll=!0,base.tab.startProcessingMultipleTabs(),this.continueClosing()},closeOther:function(e){this.__closingAll=!0,this.__current=e,this.__closingDirection="other",base.tab.startProcessingMultipleTabs(),this.continueClosing()},closeLeft:function(e){this.__closingAll=!0,this.__current=e,this.__closingDirection="left",base.tab.startProcessingMultipleTabs(),this.continueClosing()},closeRight:function(e){this.__closingAll=!0,this.__current=e,this.__closingDirection="right",base.tab.startProcessingMultipleTabs(),this.continueClosing()},continueClosing:function(){if(this.__closingDirection){if("left"==this.__closingDirection){var e=this.__current.prev();e.length?this.close(e.data("tab-id")):this.finishClosingAll()}else if("right"==this.__closingDirection){var t=this.__current.next();t.length?this.close(t.data("tab-id")):this.finishClosingAll()}else if("other"==this.__closingDirection){var a=$(base.options.configAce.tabListUl+">li");a.length>1?0===a.index(this.__current)?this.close($(a.get(1)).data("tab-id")):this.close($(a.get(0)).data("tab-id")):this.finishClosingAll()}}else{var a=$(base.options.configAce.tabListUl+">li");a.length>0?this.close($(a.get(0)).data("tab-id")):this.finishClosingAll()}},finishClosingAll:function(){base.tab.stopProcessingMultipleTabs(),this.__closingAll=!1,this.__closingDirection=null,this.__currentTab=null,this.finishClosing()},previewSelected:function(){var e=this.getSelected().data("url");base.workspace.preview(e)},previewActiveTab:function(){var e=base.tab.getURL(base.tab.getActiveId());base.workspace.preview(e)},compressAllSelected:function(){var e=this.getSelectedURL(),t=this.getDir(e),a=(t==base.workspace.getActiveDirectory()?base.workspace.getActiveName():t.replace(this.getDir(t),"").replace("/",""))+".zip";base.request({url:"file/compress",data:{urls:this.getAllSelectedURLs(),dir:t,name:a},showProcessing:!0,messageForProcessing:"Please wait while compressing the selected files...",callback:function(e){base.file.reloadDir(e.dir)}})},openCompressAsDialog:function(){base.openPopup({url:"file/compressAs",title:"Compress As"})},compressAs:function(){base.request({url:"file/compress",data:{urls:this.getAllSelectedURLs(),dir:base.thisEl.dir,name:base.thisEl.name},showProcessing:!0,messageForProcessing:"Please wait while compressing the selected files...",callback:function(e){base.file.reloadDir(e.dir),base.closePopup()}})},extractSelected:function(){if(this.getAllSelected().length>1)return void $.notify("Only one archive can be selected for extraction at a time.","warn");var e=this.getSelectedURL(),t=this.getDir(e);base.request({url:"file/extract",data:{url:e,dir:t},showProcessing:!0,messageForProcessing:"Please wait while extracting the selected archive...",callback:function(e){base.file.reloadDir(e.dir)}})},openExtractIntoDialog:function(){return this.getAllSelected().length>1?void $.notify("Only one archive can be selected for extraction at a time.","warn"):void base.openPopup({url:"file/extractInto",title:"Extract Into"})},extractInto:function(){var e=this.getSelectedURL(),t=base.thisEl.dir;base.request({url:"file/extract",data:{url:e,dir:t},showProcessing:!0,messageForProcessing:"Please wait while extracting the selected archive...",callback:function(e){base.file.reloadDir(e.dir),base.closePopup()}})}}}(),base.contextmenu=function(){return{onContextMenu:function(e){var e=base.thisEl;return e.target&&"#"+e.target.id==base.options.configTree.treeRootElement?(base.file.deselect(),!0):(e.target&&base.file.select($(e.target,base.options.configTree.treeRootElement).closest("li"),e),!0)},onShow:function(){var e=base.thisEl;base.file.isSelected()&&!base.file.isRootSelected()?(base.file.isDirSelected()?($("[data-alias='open']",e).closest(".b-m-item").hide().next().hide(),$("[data-alias='paste']",e).closest(".b-m-item").show(),e.disable("paste",base.file.isClipboardEmpty()),$("[data-alias='duplicate']",e).closest(".b-m-item").hide(),$("[data-alias='previewFile']",e).closest(".b-m-item").hide()):($("[data-alias='open']",e).closest(".b-m-item").show().next().show(),$("[data-alias='paste']",e).closest(".b-m-item").hide(),$("[data-alias='duplicate']",e).closest(".b-m-item").show(),$("[data-alias='previewFile']",e).closest(".b-m-item").show(),e.disable("previewFile",!base.workspace.isSandboxAvailable())),$("[data-alias='cut']",e).closest(".b-m-item").show(),$("[data-alias='copy']",e).closest(".b-m-item").show(),$("[data-alias='delete']",e).closest(".b-m-item").show(),$("[data-alias='refactor']",e).closest(".b-m-item").show().prev().show(),base.file.isZipSelected()?($("[data-alias='compress']",e).closest(".b-m-item").hide(),$("[data-alias='compressAs']",e).closest(".b-m-item").hide(),$("[data-alias='extract']",e).closest(".b-m-item").show(),$("[data-alias='extractInto']",e).closest(".b-m-item").show()):($("[data-alias='compress']",e).closest(".b-m-item").show(),$("[data-alias='compressAs']",e).closest(".b-m-item").show(),$("[data-alias='extract']",e).closest(".b-m-item").hide(),$("[data-alias='extractInto']",e).closest(".b-m-item").hide())):($("[data-alias='open']",e).closest(".b-m-item").hide().next().hide(),$("[data-alias='cut']",e).closest(".b-m-item").hide(),$("[data-alias='copy']",e).closest(".b-m-item").hide(),$("[data-alias='paste']",e).closest(".b-m-item").show(),e.disable("paste",base.file.isClipboardEmpty()),$("[data-alias='delete']",e).closest(".b-m-item").hide(),$("[data-alias='duplicate']",e).closest(".b-m-item").hide(),$("[data-alias='refactor']",e).closest(".b-m-item").hide().prev().hide(),$("[data-alias='previewFile']",e).closest(".b-m-item").hide(),$("[data-alias='compress']",e).closest(".b-m-item").hide(),$("[data-alias='compressAs']",e).closest(".b-m-item").hide(),$("[data-alias='extract']",e).closest(".b-m-item").hide(),$("[data-alias='extractInto']",e).closest(".b-m-item").hide()),e.disable("previewProject",!base.workspace.isSandboxAvailable())},onClick:function(){var e=base.thisEl;switch(e){case"open":base.tab.startProcessingMultipleTabs(),base.file.getAllSelected().find(">div.icon").dblclick(),base.tab.stopProcessingMultipleTabs();break;case"newFile":base.file._new();break;case"newFolder":var t="";base.file.isDirSelected()&&(t=base.file.getSelectedURL()),base.dirNew(t);break;case"newPHPFile":sceditor.call("base.fileNewFromContext('PHPFile', 'php')");break;case"newPHPClass":sceditor.call("base.fileNewFromContext('PHPClass', 'php')");break;case"newHTML":sceditor.call("base.fileNewFromContext('HTML', 'html')");break;case"newJavaScript":sceditor.call("base.fileNewFromContext('JavaScript', 'js')");break;case"newTypeScript":sceditor.call("base.fileNewFromContext('TypeScript', 'ts')");break;case"newCoffeeScript":sceditor.call("base.fileNewFromContext('CoffeeScript', 'coffee')");break;case"newXSLT":sceditor.call("base.fileNewFromContext('XSLT', 'xsl')");break;case"newCSS":sceditor.call("base.fileNewFromContext('CSS', 'css')");break;case"cut":base.file.cut();break;case"copy":base.file.copy();break;case"paste":base.file.paste();break;case"duplicate":base.file.duplicate();break;case"delete":base.file._delete();break;case"rename":base.file.openRenameDialog();break;case"moveTo":base.file.openMoveToDialog();break;case"copyTo":base.file.openCopyToDialog();break;case"search":base.file.openSearchDialog("find");break;case"uploadFiles":base.command.execute("uploadFiles");break;case"previewProject":base.workspace.preview();break;case"previewFile":base.file.previewSelected();break;case"compress":base.file.compressAllSelected();break;case"compressAs":base.file.openCompressAsDialog();break;case"extract":base.file.extractSelected();break;case"extractInto":base.file.openExtractIntoDialog()}}}}(),base.workspace=function(){return $("body").on("change",'div.workspace-row-item input[type="radio"]',function(e){var t=$(this).parents(".workspace-row-item").data("workspace"),a=t;$.ajax({type:"POST",url:"workspace/activate",dataType:"json",data:{name:a.ws_directory}}).done(function(e){if(null!=e&&"string"!=typeof e){if(e.status&&(base.workspace.setActive(e.ws),base.file.projectChanged(),base.workspace.isSandboxAvailable())){var t=$(".terminalwrapper iframe");t.length>0&&(t.src=base.options.baseUrl+"editor/terminal?domain="+base.workspace.getActive().ws_name)}base.showMessages(e.messages)}}).error(function(){$.notify("Couldn't change workspace. Please try again later.","error")})}),{__list:null,reload:function(){var e=$("#workspace-list");!e.is(":visible")||e.hasClass("loaded")&&!e.hasClass("changed")||$.ajax({type:"POST",url:"workspace/",dataType:"json"}).done(function(e){if(null!=e&&"string"!=typeof e){if(e.status){var t="",a=0,s=e.workspaces;if(base.workspace.__list=s,s)for(var i in s){a++;var n=s[i];t+="<li class='workspace-item'><div class='workspace-row-item' data-workspace='"+JSON.stringify(n)+"'><div class='input'><input id='ws-"+i+"' name='ws' "+(n.ws_active?"checked=''":"")+" type='radio' /><div class='clear'></div></div><div class='name'> <label for='ws-"+i+"'>"+n.ws_name+"</label><div class='clear'></div></div><div class='clear'></div></div></li>",n.ws_active&&base.workspace.setActive(n)}var o=$("#workspace-list");o.empty().append(t),$("#workspace-announcement-upgrade").hide(),$("#workspace-announcement-upgrade-for-zero").hide(),$("#workspace-announcement-available").hide(),$("#workspace-announcement-create").hide(),$("[data-manager-id='workspace_manager_container'] ul.leftcolcontrolslist > li").removeClass("disabled"),a>=e.limit?0==e.limit?($("#workspace-announcement-upgrade-for-zero").show(),$("[data-manager-id='workspace_manager_container'] ul.leftcolcontrolslist>li").addClass("disabled")):($("#workspace-announcement-upgrade .count").html(e.limit),$("#workspace-announcement-upgrade").show()):0>=a?($("#workspace-announcement-create").show(),$("[data-manager-id='workspace_manager_container'] ul.leftcolcontrolslist > li.edit").addClass("disabled"),$("[data-manager-id='workspace_manager_container'] ul.leftcolcontrolslist > li.delete").addClass("disabled"),$("[data-manager-id='workspace_manager_container'] ul.leftcolcontrolslist > li.export").addClass("disabled"),$("[data-manager-id='workspace_manager_container'] ul.leftcolcontrolslist > li.import").addClass("disabled")):($("#workspace-announcement-available .count").html(e.limit-a),$("#workspace-announcement-available").show()),o.addClass("loaded").removeClass("changed")}base.showMessages(e.messages)}})},changed:function(e){var t=$("#workspace-list");t.hasClass("loaded")&&t.addClass("changed"),this.reload(),e||base.file.projectChanged()},create:function(){return $("#workspace-announcement-upgrade").is(":visible")?void $("#workspace-announcement-upgrade").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100):void base.openPopup({url:base.thisEl.data("file-url"),title:base.thisEl.data("title")})},edit:function(){var e=null;if((e=$("#workspace-list li input[type='radio']:checked")).length<=0)return void $.notify("Please select workspaces to edit.","warn");var t=e.closest("div.workspace-row-item").data("workspace");base.openPopup({url:base.thisEl.data("file-url")+"/"+t.ws_directory,title:base.thisEl.data("title")})},remove:function(){var e=null;if((e=$("#workspace-list li input[type='radio']:checked")).length<=0)return void $.notify("Please select workspaces to delete.","warn");var t=e.closest("div.workspace-row-item").data("workspace");$.alert.open({type:"confirm",content:"Are you sure you want to delete the selected workspace?",cancel:!0,callback:function(e){"yes"==e&&$.ajax({type:"POST",url:"workspace/delete",dataType:"json",data:{workspace:t.ws_directory}}).done(function(e){null!=e&&"string"!=typeof e&&(e.status&&(base.workspace.changed(),base.workspace.setActive(null)),base.showMessages(e.messages))}).error(function(){$.notify("Unknown error occurred while deleting workspace.","error")})}})},"export":function(){var e=null;return(e=$("#workspace-list li input[type='radio']:checked")).length<=0?void $.notify("Please select workspaces to export.","warn"):(base.process.start("Your selected workspace is being archived. Please wait a moment."),void $.ajax({type:"POST",url:"workspace/export?type=zip",dataType:"json"}).done(function(e){e&&"string"!=typeof e&&base.showMessages(e.messages),base.process.stop()}).error(function(){$.notify("Unknown error occurred while copying file(s).","error"),base.process.stop()}))},getActive:function(){return base.options.activeWorkspace},setActive:function(e){var t=!1;return!base.options.activeWorkspace&&e||base.options.activeWorkspace&&!e?t=!0:base.options.activeWorkspace.ws_directory!=e.ws_directory&&(t=!0),base.options.activeWorkspace=e,t&&base.file.changed(),base.options.activeWorkspace},getActiveName:function(){var e=this.getActive();return e?e.ws_name:null},getNamedURL:function(e){if(this.__list)for(var t in this.__list)e=e.replace(new RegExp(t,"g"),this.__list[t].ws_name);return e},getActiveDirectory:function(){var e=this.getActive();return e?e.ws_directory+"/":null},isSandboxAvailable:function(){var e=this.getActive();return e&&e.ws_domain},preview:function(e){var t=this.getActive();if(t&&t.ws_domain){var a="http://"+t.ws_domain;e&&(a+="/"+e.replace(this.getActiveDirectory(),""));var s=window.open(a,"preview");s.focus()}}}}(),base.ftp=function(){var ftp=new Object,inProcessServer=!1,inProcessLocal=!1;base.ftp.connect=function(e){ftp.ftp_host=e.ftp_host,ftp.ftp_domain=e.ftp_domain,ftp.ftp_log_id=e.ftp_log_id,ftp.ftp_protocol=e.ftp_protocol,ftp.dir=e.dir,base.tab.openRemoteSystem({id:ftp.ftp_log_id,url:"ftp/ftpconnection/"+ftp.ftp_log_id,title:"FTP Connection ("+e.ftp_host+")"},{connection:ftp.ftp_log_id,type:ftp.ftp_protocol.toLowerCase()})},base.ftp.showRemoteProcessing=function(e,t){inProcessServer=e,t.showProcessing("remote",inProcessServer)},base.ftp.isRemoteProcessing=function(){return inProcessServer},base.ftp.showLocalProcessing=function(e,t){inProcessLocal=e,t.showProcessing("local",inProcessLocal)},base.ftp.isLocalProcessing=function(){return inProcessLocal},base.ftp.getProtocol=function(e){var t=base.tab.getData(e);return t?t.remoteInfo.type.toLowerCase():null},base.ftp.reconnectServer=function(){if(this.isRemoteProcessing())return $.notify("Please wait. The program is busy with the remote server.","info"),!1;var e=base.thisEl,t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;this.showRemoteProcessing(!0,a);var s=this.getProtocol(e.ftp_log_id);s&&($.ajax({type:"POST",url:s+"/get_file_list",data:e}).done(function(t){base.ftp.stopStatusChecking({ftp_log_id:e.ftp_log_id});var a=$("#frame"+e.ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;"undefined"!=typeof s.updateRemoteServer&&s.updateRemoteServer(t),base.ftp.showRemoteProcessing(!1,s)}).error(function(){base.ftp.stopStatusChecking({ftp_log_id:e.ftp_log_id});var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!1,a)}),base.ftp.startStatusChecking({ftp_log_id:e.ftp_log_id}))},base.ftp.reconnectLocal=function(){if(this.isLocalProcessing())return $.notify("Please wait. The program is busy with the local server.","info"),!1;var e=base.thisEl,t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;this.showLocalProcessing(!0,a),base.ftp.getLocal(e)},base.ftp.edit=function(e){var totalChecked=new Array,len=$(".ftpsavedgrid li").each(function(index,element){if($(this).find('input[type="checkbox"]').is(":checked")){var json=eval("("+$(this).find("div.ftprowitem").data("ftp")+")");totalChecked.push(json.ftp_log_id)}});1==totalChecked.length?base.openPopup({url:base.thisEl.data("file-url")+"?id="+totalChecked[0],title:base.thisEl.data("title")}):$.notify("Please select only one host to edit.","warn")},base.ftp.saveRemoteFile=function(e,t,a){var s=$("#frame"+a).get(0);if(!s)return void $.notify("You cannot save this file because the connection tab is closed.","warn");var i=s.contentWindow||s.contentDocument;this.showRemoteProcessing(!0,i);var n=this.getProtocol(a);n&&(base.request({url:n+"/saveRemoteFile",data:{file_id:e,fileContent:t},callbackOnFailure:!0,callback:function(){base.ftp.stopStatusChecking({ftp_log_id:a}),base.ftp.showRemoteProcessing(!1,i)}}),base.ftp.startStatusChecking({ftp_log_id:a}))},base.ftp.reloadList=function(){var availableFtpConn=10;$('<iframe id="reloadList" src="'+base.options.baseUrl+'ftp/get_ftp_list/" style="display: none;" />').appendTo("body").on("load",function(n){if(elmnts=$(this).contents().find("html:first").find("body:first").html(),$(this).remove(),""!=elmnts){var str="",json=eval("("+elmnts+")");if(availableFtpConn=json.limit,json=json.list,!json)return;$("ul#ftpsavedgridlilist").empty(),Object.keys(json).length>0&&$.each(json,function(e,t){str=str+"<li class='ftpitem'><div class='ftprowitem' data-ftp=\"{'ftp_log_id':'"+t.ftp_log_id+"','ftp_host':'"+t.ftp_host+"','ftp_domain':'"+t.ftp_domain+"','ftp_protocol':'"+t.ftp_protocol+"'}\"><div class='ftpcheckbox input'><input type='checkbox' id='"+t.ftp_host+"' /><div class='clear'></div></div><div class='ftphostname name'><label for='"+t.ftp_host+"_checkbox'>"+t.ftp_domain+"</label><div class='clear'></div></div><div class='ftphostconndetails'><div class='ftpconlabel ftplabelhost first'><strong>Host:</strong> "+t.ftp_host+"</div><div class='ftpconlabel ftplabeluser'><strong>User:</strong> "+t.ftp_username+"</div><div class='ftpconlabel ftplabelpost'><strong>Port:</strong> "+t.ftp_port+"</div><div class='ftpconlabel ftplabelprotocol'><strong>Protocol:</strong> "+t.ftp_protocol+"</div><div class='ftpconlabel ftplabelmode last'><strong>Transfer Mode:</strong> "+(1==t.ftp_mode?"Active":"Passive")+"</div><div class='clear'></div></div><div class='clear'></div></div></li>"}),availableFtpConn>0&&Object.keys(json).length<availableFtpConn?Object.keys(json).length>0?str=str+"<div class='clear'></div><div class='ftpannouncement message'>You have "+(availableFtpConn-Object.keys(json).length)+" saved FTP connections remaining.</div>":str+="<div class='clear'></div><div class='ftpannouncement message'><a data-action-type='popup' data-title='Create New FTP Connection' data-file-url='ftp/ftpdetails'>Click here</a> to create your first FTP connection.</div>":str=str+"<div class='clear'></div><div class='ftpannouncement message'>Your membership does not allow any(more) FTP connections. <a href='"+base.options.baseUrl+"plans'>Click here</a> to upgrade your plan to add additional FTP functionality.</div>",$("ul#ftpsavedgridlilist").append(str)}})},base.ftp["delete"]=function(e){$.alert.open({type:"confirm",content:"Are you sure you want to delete the selected FTP connection?",cancel:!0,callback:function(e){if("yes"==e){var totalChecked=new Array,len=$(".ftpsavedgrid li").each(function(index,element){if($(this).find('input[type="checkbox"]').is(":checked")){var json=eval("("+$(this).find("div.ftprowitem").data("ftp")+")");totalChecked.push(json.ftp_log_id)}});$.post("ftp/delete_array/",{ftp_log_id:totalChecked},function(e){base.ftp.reloadList()})}}})},base.ftp.disconnect=function(e){"undefined"==typeof e&&(e=base.thisEl),base.request({url:"ftp/disconnect",data:{ftp_log_id:e},callback:function(){var t=$("#frame"+e).get(0);if(t){var a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!1,a)}}})},base.ftp.clearLog=function(){var e=base.thisEl;$.post("ftp/clearLog",e,function(t){var a=$("#frame"+e.ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;s.clearLog()})},base.ftp.getLocal=function(e){$.post("file/dir2json",e,function(t){var a=$("#frame"+e.ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;s.updateLocalServer(t),base.ftp.showLocalProcessing(!1,s)}).error(function(){var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showLocalProcessing(!1,a)})},base.ftp.openLocal=function(){base.tab.openFile(base.thisEl)},base.ftp.startStatusChecking=function(e,t){try{inProcessServer===!0?$.post("ftp/getstatus/",{ftp_log_id:e.ftp_log_id},function(a){var s=$("#frame"+e.ftp_log_id).get(0),i=s.contentWindow||s.contentDocument;i.updateLog(a),clearTimeout(timer),t||(timer=setTimeout(function(){base.ftp.startStatusChecking({ftp_log_id:e.ftp_log_id})},1600))},"json").error(function(){t||(timer=setTimeout(function(){base.ftp.startStatusChecking({ftp_log_id:e.ftp_log_id})},1600))}):clearTimeout(timer)}catch(e){clearTimeout(timer),alert(e)}},base.ftp.stopStatusChecking=function(e){clearTimeout(timer),base.ftp.startStatusChecking(e,!0)},base.ftp.connectClick=function(e){var totalChecked=new Array,len=$(".ftpsavedgrid li").each(function(index,element){$(this).find('input[type="checkbox"]').is(":checked")&&totalChecked.push(new Array($(this).find('input[type="checkbox"]'),eval("("+$(this).find("div.ftprowitem").data("ftp")+")")))});0==totalChecked.length?$.notify("Please select a host to connect to from the FTP host list and try again.","warn"):totalChecked.length>1?$.notify("You may connect to only one host at a time. Please select only one host and try again.","warn"):base.ftp.connect(totalChecked[0][1])},base.ftp.rename=function(){if(this.isRemoteProcessing())return $.notify("Please wait. Another action is still processing.","info"),!1;var e=base.thisEl;if("remote"==e.server){var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;this.showRemoteProcessing(!0,a),$.ajax({type:"POST",url:"ftp/ftp_rename",data:e}).done(function(t){base.ftp.stopStatusChecking({ftp_log_id:e.ftp_log_id});var a=$("#frame"+e.ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;"undefined"!=typeof a.updateRemoteServer&&(s.updateRemoteServer(t),s.updateConnectionStatus({text:"Connected",color:"green"})),base.ftp.showRemoteProcessing(!1,s)}).error(function(){base.ftp.stopStatusChecking({ftp_log_id:e.ftp_log_id});var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!1,a)}),base.ftp.startStatusChecking({ftp_log_id:e.ftp_log_id})}else{var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;this.showLocalProcessing(!0,a),$.post("file/rename/",e,function(t){base.ftp.getLocal(e),base.file.reloadDir(e.dir)})}},base.ftp.deleteFiles=function(){if(this.isRemoteProcessing())return $.notify("Please wait. Another action is still processing.","info"),!1;var e=base.thisEl,t={ftp_log_id:e[1].ftp_log_id,files:e};if("undefined"==typeof e[1])return!1;if("remote"==e[1].server){var a=$("#frame"+e[1].ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;base.ftp.showRemoteProcessing(!0,s);var i=this.getProtocol(t.ftp_log_id);if(!i)return;$.ajax({type:"POST",url:i+"/delete_ftp_file",data:t}).done(function(t){base.ftp.stopStatusChecking({ftp_log_id:e[1].ftp_log_id});var a=$("#frame"+e[1].ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;"undefined"!=typeof s.updateRemoteServer&&(s.updateRemoteServer(t),s.updateConnectionStatus({text:"Connected",color:"green"})),base.ftp.showRemoteProcessing(!1,s)}).error(function(){base.ftp.stopStatusChecking({ftp_log_id:e[1].ftp_log_id});var t=$("#frame"+e[1].ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!1,a)}),base.ftp.startStatusChecking({ftp_log_id:e[1].ftp_log_id})}else{var a=$("#frame"+e[1].ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;this.showLocalProcessing(!0,s),$.post("file/deleteFiles",e,function(t){var a=$("#frame"+e[1].ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;base.ftp.showLocalProcessing(!1,s),e[1].type="file";try{base.ftp.getLocal(e[1]),base.file.reloadDir(e[1].dir)}catch(i){console.log(i)}})}},base.ftp.createNew=function(){var e=base.thisEl;if("remote"==e.server){var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!0,a),$.ajax({type:"POST",url:"ftp/ftp_create_new",data:e}).done(function(t){base.ftp.stopStatusChecking({ftp_log_id:e.ftp_log_id});var a=$("#frame"+e.ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;"undefined"!=typeof a.updateRemoteServer&&(a.updateRemoteServer(t),a.updateConnectionStatus({text:"Connected",color:"green"})),base.ftp.showRemoteProcessing(!1,s)}).error(function(){base.ftp.stopStatusChecking({ftp_log_id:e.ftp_log_id});var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!1,a)}),base.ftp.startStatusChecking({ftp_log_id:e.ftp_log_id})}else{var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showLocalProcessing(!0,a);var e=base.thisEl;$.ajax({type:"POST",url:"file/create2",dataType:"json",data:e}).done(function(t){var a=$("#frame"+e.ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;base.ftp.showLocalProcessing(!1,s);try{e.type="",base.ftp.getLocal(e),base.file.reloadDir(e.dir)}catch(i){}base.showMessages(t.messages)})}},base.ftp.past=function(){var e=base.thisEl;if("undefined"==typeof e[1])return!1;var t={ftp_log_id:e[1].ftp_log_id,files:e},a=$("#frame"+e[1].ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;base.ftp.showRemoteProcessing(!0,s),base.ftp.showLocalProcessing(!0,s);var i=this.getProtocol(t.ftp_log_id);i&&($.ajax({type:"POST",url:i+"/past",data:t}).done(function(t){base.ftp.stopStatusChecking({ftp_log_id:e[1].ftp_log_id});var a=$("#frame"+e[1].ftp_log_id).get(0);if(a){var s=a.contentWindow||a.contentDocument;"undefined"!=typeof s.updateRemoteServer&&(s.updateRemoteServer(t),s.updateConnectionStatus({text:"Connected",color:"green"})),base.ftp.showRemoteProcessing(!1,s);try{var i="";"local"==e[1].from?i=e[1].copy_directory:"local"==e[1].to&&(i=e[1].past_directory),base.ftp.getLocal({dir:i,ftp_log_id:e[1].ftp_log_id,workspace:e[1].workspace}),base.file.reloadDir(i)}catch(n){var a=$("#frame"+e[1].ftp_log_id).get(0),s=a.contentWindow||a.contentDocument;base.ftp.showLocalProcessing(!1,s)}}}).error(function(){var t=$("#frame"+e[1].ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!1,a),base.ftp.showLocalProcessing(!1,a),base.ftp.stopStatusChecking({ftp_log_id:e[1].ftp_log_id})}),base.ftp.startStatusChecking({ftp_log_id:e[1].ftp_log_id}))},base.ftp.editRemoteFile=function(){var e=base.thisEl;if("undefined"==typeof e.ftp_log_id)return!1;var t=$("#frame"+e.ftp_log_id).get(0),a=t.contentWindow||t.contentDocument;base.ftp.showRemoteProcessing(!0,a);var s=this.getProtocol(e.ftp_log_id);s&&(base.request({type:"POST",url:s+"/editRemoteFile",data:e,callback:function(t){base.ftp.stopStatusChecking({
ftp_log_id:e.ftp_log_id});var a=$("#frame"+e.ftp_log_id).get(0),i=a.contentWindow||a.contentDocument;base.ftp.showRemoteProcessing(!1,i);var n=t.file;n&&(base.thisEl.ftp_log_id=t.ftp_log_id,base.tab.openRemoteFile(n,{connection:t.ftp_log_id,type:s}))},callbackOnFailure:!0}),base.ftp.startStatusChecking({ftp_log_id:e.ftp_log_id}))},base.ftp.__refreshRemoteFile=function(e,t){var a={ftp_log_id:e.remoteInfo.connection,file_id:e.id},s=$("#frame"+a.ftp_log_id).get(0),i=s.contentWindow||s.contentDocument;base.ftp.showRemoteProcessing(!0,i);var n=e.remoteInfo.type;base.request({type:"POST",url:n+"/refreshRemoteFile",data:a,callback:function(e){base.ftp.stopStatusChecking({ftp_log_id:a.ftp_log_id});var s=$("#frame"+a.ftp_log_id).get(0),i=s.contentWindow||s.contentDocument;base.ftp.showRemoteProcessing(!1,i),t()},callbackOnFailure:!0}),base.ftp.startStatusChecking({ftp_log_id:a.ftp_log_id})},base.ftp.deleteRemoteTempFile=function(e){base.request({url:"ftp/deleteRemoteTempFile",data:{id:e}})}},base.database=function(){return{reload:function(){$.ajax({type:"POST",url:"database/",dataType:"json"}).done(function(e){if(null!=e&&"string"!=typeof e){if(!e.status)return void alert("error");var t="",a=0;for(var s in e.list){a++;var i=e.list[s];t+="<li class='database-item'><div class='database-row-item' data-database='"+i+"'><div class='input'><input id='db-"+s+"' name='db' type='checkbox' /><div class='clear'></div></div><div class='name'><label for='db-"+s+"'>"+i+"</label><div class='clear'></div></div><div class='clear'></div></div></li>"}$("#database-list").empty().append(t),$("#database-announcement-upgrade").hide(),$("#database-announcement-upgrade-for-zero").hide(),$("#database-announcement-available").hide(),$("#database-announcement-create").hide(),$("#database-announcement-userinfo").hide(),$("[data-manager-id='database_manager_container'] ul.leftcolcontrolslist > li").removeClass("disabled"),a>=e.limit?0==e.limit?($("#database-announcement-upgrade-for-zero").show(),$("[data-manager-id='database_manager_container'] ul.leftcolcontrolslist > li").addClass("disabled")):($("#database-announcement-upgrade .count").html(e.limit),$("#database-announcement-upgrade").show()):0>=a?($("#database-announcement-create").show(),$("[data-manager-id='database_manager_container'] ul.leftcolcontrolslist>li.edit").addClass("disabled"),$("[data-manager-id='database_manager_container'] ul.leftcolcontrolslist>li.connect").addClass("disabled"),$("[data-manager-id='database_manager_container'] ul.leftcolcontrolslist>li.delete").addClass("disabled"),$("#database-announcement-userinfo").show()):($("#database-announcement-available .count").html(e.limit-a),$("#database-announcement-available").show(),$("#database-announcement-userinfo").show())}})},create:function(){return $("#database-announcement-upgrade").is(":visible")?void $("#database-announcement-upgrade").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100):void base.openPopup({url:base.thisEl.data("file-url"),title:base.thisEl.data("title")})},rename:function(){var e=new Array;$("#database-list li").each(function(t,a){if($(this).find('input[type="checkbox"]').is(":checked")){var s=$(this).find("div.database-row-item").data("database");e.push(s)}});1==e.length?base.openPopup({url:base.thisEl.data("file-url")+"?name="+e[0],title:base.thisEl.data("title")}):e.length<1?$.notify("Please select a database to edit.","warn"):$.notify("Please select only one database to edit.","warn")},remove:function(){var e=new Array;$("#database-list li").each(function(t,a){if($(this).find('input[type="checkbox"]').is(":checked")){var s=$(this).find("div.database-row-item").data("database");e.push(s)}});return e.length<1?void $.notify("Please select databases to delete.","warn"):void $.alert.open({type:"confirm",content:"Are you sure you want to delete the selected database?",cancel:!0,callback:function(t){"yes"==t&&$.post("database/delete",{names:e},function(e){base.database.reload()})}})},connect:function(){window.open("database/connect?"+(new Date).getTime(),"_blank")}}}(),base.template=function(){return{openSaveWnd:function(e){this.__selected_id=base.thisEl,base.openPopup({url:"template/save/"+this.__selected_id,title:"New From Template"})},getSelectedId:function(){return this.__selected_id},create:function(){var e=base.thisEl;e.template_id=this.getSelectedId(),base.process.start("The selected template is being loaded into your project. Please wait a moment."),$.ajax({type:"POST",url:"template/create",dataType:"json",data:e}).done(function(t){base.file.reloadDir(e.dir,!0),base.process.stop(),$.notify("Your template selection has successfully been loaded.","success"),base.closePopup()}).error(function(e){console.log("Error while saving template.",e)})}}}(),base.process=function(){return{__processing:!1,start:function(e){var t=this.getLoader();$(".statusloaderbackdrop_noticetxt",t).html("<div class='noticetxt'>"+e+"</div><div class='noticeicon'><i class='fa fa-spin fa-spinner'></i></div>"),t.show(),this.__processing=!0},stop:function(e){this.getLoader().hide(),this.__processing=!1,e&&base.showMessages(e)},getLoader:function(){var e=$("#statusloader");return e.length<=0&&(e=$('<div id="statusloader" class="statusloaderbackdrop"><div class="statusloadbackdrop_inside"><div class="statusloaderbackdrop_notice waiting" style=""><div class="statusloaderbackdrop_noticetxt"></div></div></div></div>').appendTo("body")),e}}}(),base.widget=function(){return{init:function(e,t){if(this.__options=t?t:{},e)for(var a=0,s=null;s=e[a++];)this.enable(s),this.__options[s.widget_id]&&1==this.__options[s.widget_id].open&&this.run(s);$("#sidebartoolslist").on("click",".sidetool_widget",function(e){var t=$(this).data("widget");base.widget.run(t),base.widget.saveOption(t.widget_id,"open",1)})},enable:function(e){"undefined"==typeof e&&(e=base.thisEl),$("#sidebartoolslist #widgetshortcut"+e.widget_id).length>0||$('<li class="sidetool sidetool_widget"><div id="widgetshortcut'+e.widget_id+'" title="'+e.title+'"><img src="'+base.options.baseUrl+e.icon_url+'"/></div></li>').data("widget",e).appendTo("#sidebartoolslist")},disable:function(e){$("#sidebartoolslist #widgetshortcut"+e).parent().remove()},run:function(e){var t=$("#widget"+e.widget_id);if(t.length<=0){var a=function(t){var a=$(this),s=this.contentWindow||this.contentDocument;base.key.hook(s);var i=a.contents().find("body").css({"-webkit-box-sizing":"border-box"}),n=a.parent(),o=n.dialog("instance"),r=base.widget.__options[e.widget_id],l="undefined"!=typeof r?r.size:null,c=0,d=0,p=o.widget();if(l)c=parseFloat(l.width),d=parseFloat(l.height);else var c=i[0].scrollWidth-n.width()+p.width()+10,d=i[0].scrollHeight-n.height()+p.height()+10;var f=o.option("maxHeight");d>f&&(d=f);var u=o.option("maxWidth");c>u&&(c=u),o.option({width:c,height:d});var b="undefined"!=typeof r?r.offset:null;if(b){var g=parseFloat(b.left),h=parseFloat(b.top);g+c>window.innerWidth&&(g=window.innerWidth-c),h+d>window.innerHeight&&(h=window.innerHeight-d),p.css({position:"absolute",top:h+"px",left:g+"px"})}p.css({opacity:1})};t=$("<div class='widget' id='widget"+e.widget_id+"' data-widget-id='"+e.widget_id+"'></div>").append($("<iframe>",{src:base.options.baseUrl+"widget/run/"+e.widget_id,load:a})).dialog({appendTo:"body",title:e.title,closeOnEscape:!1,maxWidth:$("#mainContent").width(),maxHeight:$("#mainContent").height(),width:"auto",height:"auto",position:{my:"right bottom",at:"right bottom",of:"#mainContent"},close:function(e,t){base.widget.saveOption($(this).data("widget-id"),"open",0)},dragStop:function(e,t){base.widget.saveOption($(this).data("widget-id"),"offset",t.offset)},resizeStop:function(e,t){base.widget.saveOption($(this).data("widget-id"),"size",t.size)}})}else{var s=t.dialog("instance");s.open();var i=base.widget.__options[e.widget_id],n="undefined"!=typeof i?i.offset:null;if(n){var o=parseFloat(n.left),r=parseFloat(n.top),l=parseFloat(s.option("width")),c=parseFloat(s.option("height"));o+l>window.innerWidth&&(o=window.innerWidth-l),r+c>window.innerHeight&&(r=window.innerHeight-c);var d=s.widget();d.css({position:"absolute",top:r+"px",left:o+"px"})}}},__options:null,saveOption:function(e,t,a){"undefined"==typeof this.__options[e]&&(this.__options[e]={}),this.__options[e][t]=a,base.request({url:base.options.baseUrl+"widget/saveOption",data:{id:e,options:this.__options[e]}})}}}(),base.sessionValidator=function(){var e=180;return{start:function(){this.check()},check:function(){base.request({url:base.options.baseUrl+"editor/online",callback:function(e){base.sessionValidator.validate(e.online)}})},refresh:function(){this.clearAlert(),base.request({url:base.options.baseUrl+"editor/refresh",callback:function(e){base.sessionValidator.validate(e.online)}})},__validator:null,validate:function(t){if(this.__validator&&clearTimeout(this.__validator),0>=t)this.clearAlert(),location.href=base.options.baseUrl+"guest/login?returnUrl="+encodeURIComponent(location.href);else{var a=0;a=t>e&&2*e>t?t-e:parseInt(t/2),this.__validator=setTimeout(this.check,1e3*a),e>=t?this.showAlert(t):this.clearAlert()}},__time:0,showAlert:function(e){this.__time=e;var t=$("#sessionalertcontainer");t.length<=0&&(t=$(['<div id="sessionalertcontainer">','<div class="sessionalertback"></div>','<div id="sessionalert">','<div class="sessionalertinside">','<div class="expirationnotice">Your session will expire in: </div>','<div class="onlinetime"></div>','<div class="actions">','<button class="button red refresh">Stay Logged In</button>',"</div>",'<div class="desc">',"Any unsaved work will be available when you log back in.<br />You can continue right where you left off.","</div>",'<div class="clear"></div>',"</div>",'<div class="clear"></div>',"</div>",'<div class="clear"></div>',"</div>"].join("")).appendTo("body"),$(".button.refresh",t).click(function(){base.sessionValidator.refresh()})),t.show(),this.showTime()},clearAlert:function(){this.__timer&&clearTimeout(this.__timer),$("#sessionalertcontainer").hide()},__timer:null,showTime:function(){var e=parseInt(this.__time/60)+":"+this.__time%60;$("#sessionalert .onlinetime").text(e),this.__time--,this.__time<=0&&(this.__validator&&clearTimeout(this.__validator),this.clearAlert(),location.href=base.options.baseUrl+"guest/login?returnUrl="+encodeURIComponent(location.href)),this.__timer&&clearTimeout(this.__timer),this.__timer=setTimeout(function(){base.sessionValidator.showTime()},1e3)}}}(),base.saveOption=function(e,t){"undefined"==typeof t&&(t=base.thisEl),base.request({url:base.options.baseUrl+"editor/saveOption",data:{name:e,value:t}})},base.request=function(e){var t=e.callback,a=e.callbackOnFailure,s=e.showProcessing,i=e.messageForProcessing;delete e.callback,delete e.callbackOnFailure,delete e.showProcessing,delete e.messageForProcessing,"undefined"==typeof e.type&&(e.type="POST"),"undefined"==typeof e.dataType&&(e.dataType="json"),s&&base.process.start(i),$.ajax(e).done(function(e){null!=e&&"string"!=typeof e&&(e.sessionExpired&&(location.href=e.loginUrl+"?returnUrl="+encodeURIComponent(location.href)),e.status&&"undefined"!=typeof t&&t(e),s&&base.process.stop(e.messages))}).error(function(){a&&"undefined"!=typeof t&&t(!1),s&&base.process.stop(),$.notify("Unknown error occurred while processing the request.","error")})},base.showMessages=function(e){if("undefined"==typeof e&&(e=base.thisEl),e)for(var t=0,a=null;a=e[t++];)$.notify(a.msg,a.type)},base.__tweakForPlural=function(e,t,a){return"undefined"==typeof a&&(a="s"),1>=e?e+" "+t+"has been":e+" "+t+"s have been"},base.init(),base.file.init(),base.ftp()},$.sceditor.defaultOptions={activeWorkspace:null,baseUrl:"/",configAce:{setTheme:"twilight",setMode:"javascript",setTabSize:"10",setUseWrapMode:"true",fontSize:"12px",setShowPrintMargin:"true",setReadOnly:"false",treeNavigation:".sitenavdropdown",autoSetMode:!0,tabListUl:"#editorfilelist"},configTree:{treeRootElement:"#filetree",xpandSpeed:300,collapseSpeed:300,multiFolder:!0}},$.fn.sceditor=function(op){return this.each(function(){new $.sceditor(this,op)}),{call:function(e,r,popupId){return base.thisEl=r,base.popupId=popupId,eval(e)}}}}(jQuery),$(document).ready(function(){$("a").mouseover(function(){$(".sitenavdropdown.dropdownfont").removeAttr("style"),$(".sitenavdropdown.dropdownthemes").removeAttr("style")}),$(window).bind("keydown",function(e){e.ctrlKey&&122==e.which&&$('[data-action="fullScreen"]').click()})});